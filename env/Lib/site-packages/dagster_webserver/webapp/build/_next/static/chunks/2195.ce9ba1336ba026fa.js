"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2195],{29211:function(e,n,t){t.d(n,{G:function(){return PipelineRunsRoot}});var r=t(85333),i=t(6692),o=t(58467),s=t(73235),a=t(82550),l=t(52322),c=t(89130),u=t(21221),d=t(28888),p=t(18399),h=t(92364),m=t(57830),x=t(12084),f=t(83302),j=t(67486),g=t(2784),v=t(7267),y=t(88286),S=t(14388),b=t(91195),_=t(55237),O=t(68028),P=t(83568),R=t(60731),A=t(61608),N=t(84495),C=t(38917),k=t(49313),E=t(65767),w=t(16148),T=t(90894),F=t(19358),D=t(46988),$=t(44254),I=t(38153);function _templateObject(){var e=(0,s._)(["\n  query PipelineRunsRootQuery($limit: Int, $cursor: String, $filter: RunsFilter!) {\n    pipelineRunsOrError(limit: $limit, cursor: $cursor, filter: $filter) {\n      ... on Runs {\n        results {\n          id\n          ...RunTableRunFragment\n        }\n      }\n      ... on InvalidPipelineRunsFilterError {\n        message\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"]);return _templateObject=function(){return e},e}var z=["status","tag","id","created_date_before","created_date_after"],PipelineRunsRoot=function(e){(0,O.Px)();var n=(0,v.UO)().pipelinePath,t=e.repoAddress,s=void 0===t?null:t,c=(0,y.p3)(n),j=c.pipelineName,b=c.snapshotId,w=(0,D.Ux)(s),I=(0,D.E8)(w,j);(0,S.b)(c,I);var U=(0,P.se)("PipelineRunsRoot"),J=(0,o._)((0,k.oD)(z),2),W=J[0],M=J[1],V=(0,g.useMemo)(function(){return[I?{token:"job",value:j}:{token:"pipeline",value:j},b?{token:"snapshotId",value:b}:null].filter(Boolean)},[I,j,b]),G=(0,a._)(W).concat((0,a._)(V));if(s){var B={token:"tag",value:"".concat(N.H.RepositoryLabelTag,"=").concat((0,$.Wg)(s))};G.push(B)}var H=(0,E.l)({query:L,pageSize:25,variables:{filter:(0,i._)((0,r._)({},(0,k.VH)(G)),{pipelineName:j,snapshotId:b})},nextCursorForResult:function(e){var n;if("Runs"===e.pipelineRunsOrError.__typename)return null===(n=e.pipelineRunsOrError.results[24])||void 0===n?void 0:n.id},getResultArray:function(e){return e&&"Runs"===e.pipelineRunsOrError.__typename?e.pipelineRunsOrError.results:[]}}),q=H.queryResult,Q=H.paginationProps;(0,R.Hu)(q,"PipelineRunsRootQuery");var K=(0,g.useCallback)(function(e){var n=(0,u.HY)(e);W.some(function(e){return(0,u.HY)(e)===n})||M((0,a._)(W).concat([e]))},[W,M]),Z=(0,_.C4)(q,_.dT),Y=(0,k.Vv)({enabledFilters:z,tokens:W,onChange:M,loading:q.loading}),X=Y.button,ee=Y.activeFiltersJsx;return(0,g.useEffect)(function(){q.loading||U.endTrace()},[q.loading,U]),(0,l.jsx)(C.Lw.Provider,{value:{refetch:q.refetch},children:(0,l.jsx)(d.T,{children:(0,l.jsx)(T.g,{queryResult:q,allowStaleData:!0,children:function(e){var t=e.pipelineRunsOrError;if("Runs"!==t.__typename)return(0,l.jsx)(p.x,{padding:{vertical:64},children:(0,l.jsx)(h.t,{icon:"error",title:"Query Error",description:t.message})});var i=t.results.slice(0,25),o=Q.hasNextCursor,a=Q.hasPrevCursor;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(F.Y,{$top:0,children:(0,l.jsx)(A.AL,{runs:i,onAddTag:K,actionBarComponents:(0,l.jsxs)(p.x,{flex:{direction:"row",justifyContent:"space-between",grow:1,alignItems:"center",gap:4},margin:{right:8},children:[X,(0,l.jsx)(_.xi,{refreshState:Z})]}),belowActionBarComponents:(0,l.jsxs)(l.Fragment,{children:[V.map(function(e){var n=e.token,t=e.value;return(0,l.jsx)(m.V,{children:"".concat(n,":").concat(t)},n)}),ee.length?(0,l.jsxs)(l.Fragment,{children:[ee,(0,l.jsx)(x.Z,{onClick:function(){M([])},children:"Clear all"})]}):null]}),emptyState:function(){return(0,l.jsx)(EmptyState,{repoAddress:s,anyFilter:W.length>0,jobName:j,jobPath:n})}})}),o||a?(0,l.jsx)("div",{style:{marginTop:"20px"},children:(0,l.jsx)(f.pI,(0,r._)({},Q))}):null]})}})})})},EmptyState=function(e){var n=e.repoAddress,t=e.anyFilter,r=e.jobName,i=e.jobPath,o=(0,D.Ux)(n),s=(0,D.Hb)(o,r);return(0,l.jsx)(p.x,{padding:{vertical:64},children:(0,l.jsx)(h.t,{icon:"run",title:"No runs found",description:n?s?(0,l.jsxs)(p.x,{flex:{direction:"column",gap:12},children:[(0,l.jsx)("div",{children:t?"There are no matching runs for these filters.":"You have not materialized any assets with this job yet."}),(0,l.jsx)("div",{children:(0,l.jsx)(w.A,{icon:(0,l.jsx)(j.JO,{name:"materialization"}),to:(0,I.$U)(n,"/jobs/".concat(i)),children:"Materialize an asset"})})]}):(0,l.jsxs)(p.x,{flex:{direction:"column",gap:12},children:[(0,l.jsx)("div",{children:t?"There are no matching runs for these filters.":"You have not launched any runs for this job yet."}),(0,l.jsx)("div",{children:(0,l.jsx)(w.A,{icon:(0,l.jsx)(j.JO,{name:"add_circle"}),to:(0,I.$U)(n,"/jobs/".concat(i,"/playground")),children:"Launch a run"})})]}):(0,l.jsx)("div",{children:"You have not launched any runs for this job."})})})},L=(0,c.Ps)(_templateObject(),A.ZZ,b.B)},72195:function(e,n,t){t.r(n),t.d(n,{WorkspaceRoot:function(){return WorkspaceRoot},default:function(){return tA}});var r=t(52322),i=t(18399),o=t(92364),s=t(82370),a=t(2784),l=t(7267),c=t(58467),u=t(73235),d=t(40794),p=t(89130),h=t(17131),m=t(81308),x=t(57830),f=t(91195),j=t(68028),g=t(28252),v=t(63386),y=t(60731),S=t(42982),b=t(15848),_=t(88286),O=t(90894),P=t(38153);function _templateObject(){var e=(0,u._)(["\n  query GraphExplorerRootQuery(\n    $graphSelector: GraphSelector\n    $rootHandleID: String!\n    $requestScopeHandleID: String\n  ) {\n    graphOrError(selector: $graphSelector) {\n      ... on Graph {\n        id\n        name\n        solidHandle(handleID: $rootHandleID) {\n          ...GraphExplorerSolidHandleFragment\n        }\n        solidHandles(parentHandleID: $requestScopeHandleID) {\n          handleID\n          solid {\n            name\n          }\n          ...GraphExplorerSolidHandleFragment\n        }\n        ...GraphExplorerFragment\n      }\n      ... on GraphNotFoundError {\n        message\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n  ","\n"]);return _templateObject=function(){return e},e}var GraphRoot=function(e){(0,j.Px)();var n=e.repoAddress,t=(0,l.UO)(),o=(0,_.p3)(t[0]),s=o.opNames.length>1?o.opNames[o.opNames.length-2]:o.pipelineName;return(0,g.j)("Graph: ".concat(s)),(0,r.jsxs)("div",{style:{height:"100%",display:"flex",flexDirection:"column"},children:[(0,r.jsx)(h.m,{title:(0,r.jsx)(m.X6,{children:s}),tags:(0,r.jsxs)(x.V,{icon:"schema",children:["Graph in ",(0,r.jsx)(v.b,{repoAddress:n})]})}),(0,r.jsx)(i.x,{border:"top",style:{minHeight:0,flex:1,display:"flex"},children:(0,r.jsx)(GraphExplorerRoot,{repoAddress:n})})]})},GraphExplorerRoot=function(e){var n=e.repoAddress,t=(0,l.UO)(),i=(0,_.p3)(t["0"]),s=(0,l.k6)(),u=(0,c._)((0,a.useState)({explodeComposites:!1,preferAssetRendering:!0}),2),p=u[0],h=u[1],m=i.opNames.slice(0,i.opNames.length-1),x=(0,d.a)(R,{variables:{graphSelector:{repositoryName:(null==n?void 0:n.name)||"",repositoryLocationName:(null==n?void 0:n.location)||"",graphName:i.pipelineName},rootHandleID:m.join("."),requestScopeHandleID:p.explodeComposites?void 0:m.join(".")}});return(0,y.Hu)(x,"GraphExplorerRootQuery"),(0,r.jsx)(O.g,{queryResult:x,children:function(t){var a=t.graphOrError;if("GraphNotFoundError"===a.__typename)return(0,r.jsx)(o.t,{icon:"error",title:"Graph not found",description:a.message});if("PythonError"===a.__typename)return(0,r.jsx)(o.t,{icon:"error",title:"Query Error",description:a.message});var l=a.solidHandle,c=p.explodeComposites?(0,S.i)(a.solidHandles):a.solidHandles;return(0,r.jsx)(b.m0,{options:p,setOptions:h,explorerPath:i,onChangeExplorerPath:function(n,t){var r=(0,P.$U)(e.repoAddress,"/graphs/".concat((0,_.gY)(n)));"push"===t?s.push(r):s.replace(r)},container:a,repoAddress:n,handles:c,parentHandle:l||void 0,isGraph:!0,getInvocations:function(e){return c.filter(function(n){return n.solid.definition.name===e}).map(function(e){return{handleID:e.handleID}})}})}})},R=(0,p.Ps)(_templateObject(),b.Q,b.Sm,f.B),A=t(63832),N=t(25195),C=t(34822),k=t(82550),E=t(67486),w=t(88510),T=t(47933),F=t(35505),D=t(20302),$=t(44254),I=t(62175),z=t(55658),L=t(34263),U=t(15282),validateExpandedKeys=function(e){return Array.isArray(e)?e:[]},usePersistedExpansionState=function(e){var n=(0,a.useContext)(L.I).basePath,t=(0,c._)((0,U.U)("".concat(n,":dagster.").concat(e),validateExpandedKeys),2),r=t[0],i=t[1],o=(0,a.useCallback)(function(e){i(function(n){var t=new Set(n||[]);return t.has(e)?t.delete(e):t.add(e),Array.from(t)})},[i]);return(0,a.useMemo)(function(){return{expandedKeys:r,onToggle:o}},[r,o])};function VirtualizedRepoAssetTable_templateObject(){var e=(0,u._)(["\n  cursor: pointer;\n\n  :focus,\n  :active {\n    outline: none;\n  }\n\n  ",'[aria-label="arrow_drop_down"] {\n    transition: transform 100ms linear;\n    ',"\n  }\n"]);return VirtualizedRepoAssetTable_templateObject=function(){return e},e}function _templateObject1(){var e=(0,u._)(["\n  fragment RepoAssetTableFragment on AssetNode {\n    id\n    assetKey {\n      path\n    }\n    groupName\n    ...AssetTableDefinitionFragment\n  }\n\n  ","\n"]);return _templateObject1=function(){return e},e}var J="UNGROUPED",VirtualizedRepoAssetTable=function(e){var n=e.repoAddress,t=e.assets,i=(0,a.useRef)(null),o=(0,$.Uz)(n),s=usePersistedExpansionState("".concat(o,"-").concat("assets-virtualized-expansion-state")),l=s.expandedKeys,u=s.onToggle,d=(0,a.useMemo)(function(){var e={},n=!0,r=!1,i=void 0;try{for(var o,s=t[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var a=o.value,l=a.groupName||J,c=e[l]||[];e[l]=(0,k._)(c).concat([a])}}catch(e){r=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}return e},[t]),p=(0,a.useMemo)(function(){var e=[];return Object.entries(d).forEach(function(n){var t=(0,c._)(n,2),r=t[0],i=t[1];e.push({type:"group",name:r,assetCount:i.length}),l.includes(r)&&i.forEach(function(n){e.push({type:"asset",id:n.id,definition:n})})}),e},[d,l]),h=(0,w.MG)({count:p.length,getScrollElement:function(){return i.current},estimateSize:function(e){var n=p[e];return(null==n?void 0:n.type)==="group"?48:64},overscan:5}),m=h.getTotalSize(),x=h.getVirtualItems();return(0,r.jsx)("div",{style:{overflow:"hidden"},children:(0,r.jsxs)(z.W2,{ref:i,children:[(0,r.jsx)(D.XC,{nameLabel:"Asset name"}),(0,r.jsx)(z.Nh,{$totalHeight:m,children:x.map(function(e){var t=e.index,i=e.key,o=e.size,s=e.start,a=p[t];return"group"===a.type?(0,r.jsx)(GroupNameRow,{repoAddress:n,groupName:a.name,assetCount:a.assetCount,expanded:l.includes(a.name),height:o,start:s,onToggle:u},i):(0,r.jsx)(D.pN,{showCheckboxColumn:!1,definition:a.definition,path:a.definition.assetKey.path,type:"asset",repoAddress:n,showRepoColumn:!1,height:o,start:s,checked:!1,onToggleChecked:function(){},onWipe:function(){}},i)})})]})})},GroupNameRow=function(e){var n=e.repoAddress,t=e.groupName,o=e.assetCount,s=e.expanded,a=e.height,l=e.start,c=e.onToggle;return(0,r.jsx)(W,{$height:a,$start:l,onClick:function(){return c(t)},$open:s,tabIndex:0,onKeyDown:function(e){("Space"===e.code||"Enter"===e.code)&&(e.preventDefault(),c(t))},children:(0,r.jsxs)(i.x,{background:N.gJ(),flex:{direction:"row",alignItems:"center",gap:8,justifyContent:"space-between"},padding:{horizontal:24},border:"bottom",style:{height:"100%"},children:[(0,r.jsxs)(i.x,{flex:{alignItems:"center",gap:8},children:[(0,r.jsx)(E.JO,{name:"asset_group"}),t===J?(0,r.jsx)("div",{children:"Ungrouped assets"}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("strong",{children:t}),t!==J?(0,r.jsx)(i.x,{margin:{left:12},children:(0,r.jsx)(T.rU,{to:(0,P.$U)(n,"/asset-groups/".concat(t)),children:(0,r.jsxs)(i.x,{flex:{direction:"row",alignItems:"center",gap:4},children:[(0,r.jsx)("span",{children:"View lineage"}),(0,r.jsx)(E.JO,{name:"open_in_new",size:16,color:N.Es()})]})})}):null]})]}),(0,r.jsxs)(i.x,{flex:{direction:"row",alignItems:"center",gap:12},children:[(0,r.jsx)(x.V,{children:1===o?"1 asset":"".concat(o," assets")}),(0,r.jsx)(E.JO,{name:"arrow_drop_down",size:20})]})]})})},W=(0,F.ZP)(z.X2).withConfig({componentId:"sc-7c6c7645-0"})(VirtualizedRepoAssetTable_templateObject(),E.a1,function(e){return e.$open?null:"transform: rotate(-90deg);"}),M=(0,p.Ps)(_templateObject1(),I.s),V=t(20763),G=t(56121),B=t(55237),H=t(88983),q=t(71277);function WorkspaceAssetsRoot_templateObject(){var e=(0,u._)(["\n  query WorkspaceAssetsQuery($selector: RepositorySelector!) {\n    repositoryOrError(repositorySelector: $selector) {\n      ... on Repository {\n        id\n        name\n        assetNodes {\n          id\n          ...RepoAssetTableFragment\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"]);return WorkspaceAssetsRoot_templateObject=function(){return e},e}var WorkspaceAssetsRoot=function(e){var n=e.repoAddress;(0,j.Px)();var t=(0,$.Uz)(n);(0,g.j)("Assets: ".concat(t));var s=(0,G.$)(n),l=(0,c._)((0,q.q)({queryKey:"search",defaults:{search:""}}),2),u=l[0],p=l[1],h=(0,d.a)(Q,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0,variables:{selector:s}});(0,y.Hu)(h,"WorkspaceAssetsQuery");var m=h.data,x=h.loading,f=(0,B.C4)(h,B.dT),v=u.trim().toLocaleLowerCase().length>0,S=(0,a.useMemo)(function(){return(null==m?void 0:m.repositoryOrError.__typename)==="Repository"?m.repositoryOrError.assetNodes:[]},[m]),b=(0,H.f)(u,S);return(0,r.jsxs)(i.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,r.jsx)(V.h,{repoAddress:n,tab:"assets",refreshState:f,queryData:h}),(0,r.jsx)(i.x,{padding:{horizontal:24,vertical:16},children:(0,r.jsx)(C.oi,{icon:"search",value:u,onChange:function(e){return p(e.target.value)},placeholder:"Filter by asset name…",style:{width:"340px"}})}),x&&!m?(0,r.jsx)(i.x,{padding:64,children:(0,r.jsx)(A.$,{purpose:"page"})}):x&&!m?(0,r.jsx)(i.x,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,r.jsxs)(i.x,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,r.jsx)(A.$,{purpose:"body-text"}),(0,r.jsx)("div",{style:{color:N.$()},children:"Loading assets…"})]})}):b.length?(0,r.jsx)(VirtualizedRepoAssetTable,{repoAddress:n,assets:b}):v?(0,r.jsx)(i.x,{padding:{top:20},children:(0,r.jsx)(o.t,{icon:"search",title:"No matching assets",description:(0,r.jsxs)("div",{children:["No assets matching ",(0,r.jsx)("strong",{children:u})," were found in ",t]})})}):(0,r.jsx)(i.x,{padding:{top:20},children:(0,r.jsx)(o.t,{icon:"search",title:"No assets",description:"No assets were found in ".concat(t)})})]})},Q=(0,p.Ps)(WorkspaceAssetsRoot_templateObject(),M,f.B),K=t(46988),Z=t(83601),Y=t(41256);function VirtualizedGraphTable_templateObject(){var e=(0,u._)(["\n  display: grid;\n  grid-template-columns: 100%;\n  height: 100%;\n"]);return VirtualizedGraphTable_templateObject=function(){return e},e}function VirtualizedGraphTable_templateObject1(){var e=(0,u._)(["\n  query SingleGraphQuery($selector: GraphSelector!) {\n    graphOrError(selector: $selector) {\n      ... on Graph {\n        id\n        name\n        description\n      }\n    }\n  }\n"]);return VirtualizedGraphTable_templateObject1=function(){return e},e}var VirtualizedGraphTable=function(e){var n=e.repoAddress,t=e.graphs,i=(0,a.useRef)(null),o=(0,w.MG)({count:t.length,getScrollElement:function(){return i.current},estimateSize:function(){return 64},overscan:10}),s=o.getTotalSize(),l=o.getVirtualItems();return(0,r.jsx)("div",{style:{overflow:"hidden"},children:(0,r.jsxs)(z.W2,{ref:i,children:[(0,r.jsx)(z.VJ,{templateColumns:"100%",sticky:!0,children:(0,r.jsx)(z.qN,{children:"Graph"})}),(0,r.jsx)(z.Nh,{$totalHeight:s,children:l.map(function(e){var i=e.index,o=e.key,s=e.size,a=e.start,l=t[i];return(0,r.jsx)(GraphRow,{name:l.name,description:l.description,path:l.path,repoAddress:n,height:s,start:a},o)})})]})})},GraphRow=function(e){var n=e.name,t=e.path,o=e.description,s=e.repoAddress,l=e.start,u=e.height,d=(0,c._)((0,Z.t)(ee,{variables:{selector:{repositoryName:s.name,repositoryLocationName:s.location,graphName:n}}}),2),p=d[0],h=d[1];(0,Y.v5)(p);var x=h.data,f=(0,a.useMemo)(function(){return o||((null==x?void 0:x.graphOrError.__typename)==="Graph"?x.graphOrError.description:null)},[x,o]);return(0,r.jsx)(z.X2,{$height:u,$start:l,children:(0,r.jsx)(X,{border:"bottom",children:(0,r.jsx)(z.E5,{children:(0,r.jsxs)(i.x,{flex:{direction:"column"},children:[(0,r.jsx)("div",{style:{whiteSpace:"nowrap",fontWeight:500},children:(0,r.jsx)(T.rU,{to:(0,P.$U)(s,t),children:n})}),f?(0,r.jsx)("div",{style:{maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis"},children:(0,r.jsx)(m.YS,{style:{color:N.$(),whiteSpace:"nowrap"},children:f})}):null]})})})})},X=(0,F.ZP)(i.x).withConfig({componentId:"sc-a274a37e-0"})(VirtualizedGraphTable_templateObject()),ee=(0,p.Ps)(VirtualizedGraphTable_templateObject1()),en=t(35157);function WorkspaceGraphsRoot_templateObject(){var e=(0,u._)(["\n  query WorkspaceGraphsQuery($selector: RepositorySelector!) {\n    repositoryOrError(repositorySelector: $selector) {\n      ... on Repository {\n        id\n        usedSolids {\n          definition {\n            ... on CompositeSolidDefinition {\n              id\n              name\n              description\n            }\n          }\n          invocations {\n            pipeline {\n              id\n              name\n            }\n            solidHandle {\n              handleID\n            }\n          }\n        }\n        pipelines {\n          id\n          name\n          isJob\n          graphName\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n"]);return WorkspaceGraphsRoot_templateObject=function(){return e},e}var WorkspaceGraphsRoot=function(e){var n=e.repoAddress;(0,j.Px)();var t=(0,$.Uz)(n);(0,g.j)("Graphs: ".concat(t));var s=(0,G.$)(n),l=(0,c._)((0,q.q)({queryKey:"search",defaults:{search:""}}),2),u=l[0],p=l[1],h=(0,d.a)(et,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0,variables:{selector:s}});(0,y.Hu)(h,"WorkspaceGraphsQuery");var m=h.data,x=h.loading,f=(0,B.C4)(h,B.dT),v=u.trim().toLocaleLowerCase(),S=v.length>0,b=(0,a.useMemo)(function(){var e=null==m?void 0:m.repositoryOrError;if(!e||"Repository"!==e.__typename)return[];var n=Array.from(new Set(e.pipelines.filter(function(e){return e.isJob&&!(0,en.pv)(e.name)}).map(function(e){return e.graphName}))).map(function(e){return{name:e,path:"/graphs/".concat(e),description:null}});return e.usedSolids.forEach(function(e){if("CompositeSolidDefinition"===e.definition.__typename){var t=e.invocations[0];t&&n.push({name:e.definition.name,path:"/graphs/".concat(t.pipeline.name,"/").concat(t.solidHandle.handleID,"/"),description:e.definition.description})}}),n.sort(function(e,n){return e.name.localeCompare(n.name)})},[m]),_=(0,a.useMemo)(function(){var e=v.toLocaleLowerCase();return b.filter(function(n){return n.name.toLocaleLowerCase().includes(e)})},[b,v]);return(0,r.jsxs)(i.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,r.jsx)(V.h,{repoAddress:n,tab:"graphs",refreshState:f,queryData:h}),(0,r.jsx)(i.x,{padding:{horizontal:24,vertical:16},children:(0,r.jsx)(C.oi,{icon:"search",value:u,onChange:function(e){return p(e.target.value)},placeholder:"Filter by graph name…",style:{width:"340px"}})}),x&&!m?(0,r.jsx)(i.x,{padding:64,children:(0,r.jsx)(A.$,{purpose:"page"})}):x&&!m?(0,r.jsx)(i.x,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,r.jsxs)(i.x,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,r.jsx)(A.$,{purpose:"body-text"}),(0,r.jsx)("div",{style:{color:N.$()},children:"Loading graphs…"})]})}):_.length?(0,r.jsx)(VirtualizedGraphTable,{repoAddress:n,graphs:_}):S?(0,r.jsx)(i.x,{padding:{top:20},children:(0,r.jsx)(o.t,{icon:"search",title:"No matching graphs",description:(0,r.jsxs)("div",{children:["No graphs matching ",(0,r.jsx)("strong",{children:u})," were found in ",t]})})}):(0,r.jsx)(i.x,{padding:{top:20},children:(0,r.jsx)(o.t,{icon:"search",title:"No graphs",description:"No graphs were found in ".concat(t)})})]})},et=(0,p.Ps)(WorkspaceGraphsRoot_templateObject(),f.B),er=t(9901),VirtualizedJobTable=function(e){var n=e.repoAddress,t=e.jobs,i=(0,a.useRef)(null),o=(0,w.MG)({count:t.length,getScrollElement:function(){return i.current},estimateSize:function(){return 64},overscan:10}),s=o.getTotalSize(),l=o.getVirtualItems();return(0,r.jsx)("div",{style:{overflow:"hidden"},children:(0,r.jsxs)(z.W2,{ref:i,children:[(0,r.jsx)(er.I,{}),(0,r.jsx)(z.Nh,{$totalHeight:s,children:l.map(function(e){var i=e.index,o=e.key,s=e.size,a=e.start,l=t[i];return(0,r.jsx)(er.b,{name:l.name,isJob:l.isJob,repoAddress:n,height:s,start:a},o)})})]})})},ei=t(83568);function WorkspaceJobsRoot_templateObject(){var e=(0,u._)(["\n  query WorkspaceJobsQuery($selector: RepositorySelector!) {\n    repositoryOrError(repositorySelector: $selector) {\n      ... on Repository {\n        id\n        name\n        pipelines {\n          id\n          name\n          isJob\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n"]);return WorkspaceJobsRoot_templateObject=function(){return e},e}var WorkspaceJobsRoot=function(e){var n=e.repoAddress,t=(0,ei.se)("WorkspaceJobsRoot");(0,j.Px)();var s=(0,$.Uz)(n);(0,g.j)("Jobs: ".concat(s));var l=(0,G.$)(n),u=(0,c._)((0,q.q)({queryKey:"search",defaults:{search:""}}),2),p=u[0],h=u[1],m=(0,d.a)(eo,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0,variables:{selector:l}});(0,y.Hu)(m,"WorkspaceJobsQuery");var x=m.data,f=m.loading;(0,a.useLayoutEffect)(function(){f||t.endTrace()},[f,t]);var v=(0,B.C4)(m,B.dT),S=p.trim().toLocaleLowerCase(),b=S.length>0,_=(0,a.useMemo)(function(){return(null==x?void 0:x.repositoryOrError.__typename)==="Repository"?x.repositoryOrError.pipelines:[]},[x]),O=(0,a.useMemo)(function(){var e=S.toLocaleLowerCase();return _.filter(function(n){var t=n.name;return!(0,en.pv)(t)&&t.toLocaleLowerCase().includes(e)})},[_,S]);return(0,r.jsxs)(i.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,r.jsx)(V.h,{repoAddress:n,tab:"jobs",refreshState:v,queryData:m}),(0,r.jsx)(i.x,{padding:{horizontal:24,vertical:16},children:(0,r.jsx)(C.oi,{icon:"search",value:p,onChange:function(e){return h(e.target.value)},placeholder:"Filter by job name…",style:{width:"340px"}})}),f&&!x?(0,r.jsx)(i.x,{padding:64,children:(0,r.jsx)(A.$,{purpose:"page"})}):f&&!x?(0,r.jsx)(i.x,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,r.jsxs)(i.x,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,r.jsx)(A.$,{purpose:"body-text"}),(0,r.jsx)("div",{style:{color:N.$()},children:"Loading jobs…"})]})}):O.length?(0,r.jsx)(VirtualizedJobTable,{repoAddress:n,jobs:O}):b?(0,r.jsx)(i.x,{padding:{top:20},children:(0,r.jsx)(o.t,{icon:"search",title:"No matching jobs",description:(0,r.jsxs)("div",{children:["No jobs matching ",(0,r.jsx)("strong",{children:p})," were found in ",s]})})}):(0,r.jsx)(i.x,{padding:{top:20},children:(0,r.jsx)(o.t,{icon:"search",title:"No jobs",description:"No jobs were found in ".concat(s)})})]})},eo=(0,p.Ps)(WorkspaceJobsRoot_templateObject(),f.B),es=t(85333),ea=t(6692),el=t(82361),ec=t(21221),eu=t(10735),ed=t(19126),ep=t.n(ed),eh=t(41061),em=t(87763),ex=t(33161);function OpCard_templateObject(){var e=(0,u._)(["\n  fragment OpCardSolidDefinitionFragment on ISolidDefinition {\n    name\n    description\n    metadata {\n      key\n      value\n    }\n    inputDefinitions {\n      name\n    }\n    outputDefinitions {\n      name\n    }\n    ...OpNodeDefinitionFragment\n  }\n\n  ","\n"]);return OpCard_templateObject=function(){return e},e}function OpCard_templateObject1(){var e=(0,u._)(["\n  flex: 1;\n  max-width: 450px;\n  position: relative;\n"]);return OpCard_templateObject1=function(){return e},e}var OpCard=function(e){var n=e.definition,t=n.name,o=n.inputDefinitions,s=n.outputDefinitions,a=(0,ex.og)({name:t,inputs:o.map(function(e){return{definition:e,dependsOn:[]}}),outputs:s.map(function(e){return{definition:e,dependedBy:[]}}),definition:{description:null,assetNodes:[]}},{x:0,y:0});return(0,r.jsx)(i.x,{padding:24,children:(0,r.jsx)(ej,{style:{height:a.bounds.height},children:(0,r.jsx)(em.Un,{invocation:void 0,definition:e.definition,minified:!1,onClick:function(){},onDoubleClick:function(){},onEnterComposite:function(){},onHighlightEdges:function(){},layout:a,selected:!1,focused:!1,highlightedEdges:[],dim:!1})})})},ef=(0,p.Ps)(OpCard_templateObject(),em.WH),ej=F.ZP.div.withConfig({componentId:"sc-c5eb3a53-0"})(OpCard_templateObject1()),eg=t(65139);function OpDetailsRoot_templateObject(){var e=(0,u._)(["\n  query UsedSolidDetailsQuery($name: String!, $repositorySelector: RepositorySelector!) {\n    repositoryOrError(repositorySelector: $repositorySelector) {\n      ... on Repository {\n        id\n        usedSolid(name: $name) {\n          definition {\n            ...OpCardSolidDefinitionFragment\n            ...SidebarOpDefinitionFragment\n          }\n          invocations {\n            pipeline {\n              id\n              name\n            }\n            solidHandle {\n              handleID\n            }\n          }\n        }\n      }\n    }\n  }\n\n  ","\n  ","\n"]);return OpDetailsRoot_templateObject=function(){return e},e}function OpDetailsRoot_templateObject1(){var e=(0,u._)(["\n  overflow-y: scroll;\n  flex: 1;\n"]);return OpDetailsRoot_templateObject1=function(){return e},e}var UsedSolidDetails=function(e){var n=e.name,t=e.onClickInvocation,i=e.repoAddress,o=(0,G.$)(i),s=(0,d.a)(ev,{variables:{name:n,repositorySelector:o}});return(0,r.jsx)(O.g,{queryResult:s,children:function(e){var n=e.repositoryOrError;if(!((null==n?void 0:n.__typename)==="Repository"&&n.usedSolid))return null;var i=n.usedSolid;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(OpCard,{definition:i.definition}),(0,r.jsx)(eg.I,{definition:i.definition,showingSubgraph:!1,onClickInvocation:t,getInvocations:function(){return i.invocations.map(function(e){return{handleID:e.solidHandle.handleID,pipelineName:e.pipeline.name}})}})]})}})},ev=(0,p.Ps)(OpDetailsRoot_templateObject(),ef,eg.u),ey=F.ZP.div.withConfig({componentId:"sc-9eb4296a-0"})(OpDetailsRoot_templateObject1()),eS=t(89481);function OpsRoot_templateObject(){var e=(0,u._)(["\n  .solids-list:focus {\n    outline: none;\n  }\n"]);return OpsRoot_templateObject=function(){return e},e}function OpsRoot_templateObject1(){var e=(0,u._)(["\n  query OpsRootQuery($repositorySelector: RepositorySelector!) {\n    repositoryOrError(repositorySelector: $repositorySelector) {\n      ... on Repository {\n        id\n        usedSolids {\n          ...OpsRootUsedSolid\n        }\n      }\n    }\n  }\n\n  fragment OpsRootUsedSolid on UsedSolid {\n    definition {\n      name\n      ...OpTypeSignatureFragment\n    }\n    invocations {\n      pipeline {\n        id\n        isJob\n        name\n      }\n    }\n  }\n\n  ","\n"]);return OpsRoot_templateObject1=function(){return e},e}function _templateObject2(){var e=(0,u._)(["\n  align-items: flex-start;\n  background: ",";\n  box-shadow:\n    "," 4px 0 0 inset,\n    "," 0 -1px 0 inset;\n  color: ",";\n  cursor: pointer;\n  font-size: 14px;\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n  padding: 12px 24px;\n  user-select: none;\n"]);return _templateObject2=function(){return e},e}function _templateObject3(){var e=(0,u._)(["\n  flex: 1;\n  font-weight: 600;\n"]);return _templateObject3=function(){return e},e}function _templateObject4(){var e=(0,u._)(["\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n"]);return _templateObject4=function(){return e},e}var eb=eh.qj,e_=eh.Z8,eO=eh.aV;function flatUniq(e){var n={},t=!0,r=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(t=(o=s.next()).done);t=!0){var a=o.value,l=!0,c=!1,u=void 0;try{for(var d,p=a[Symbol.iterator]();!(l=(d=p.next()).done);l=!0)n[d.value]=!0}catch(e){c=!0,u=e}finally{try{l||null==p.return||p.return()}finally{if(c)throw u}}}}catch(e){r=!0,i=e}finally{try{t||null==s.return||s.return()}finally{if(r)throw i}}return Object.keys(n).sort(function(e,n){return e.localeCompare(n)})}var OpsRoot=function(e){(0,j.Px)(),(0,g.j)("Ops");var n=(0,l.UO)().name,t=e.repoAddress,i=(0,G.$)(t),o=(0,d.a)(eR,{variables:{repositorySelector:i}});return(0,y.Hu)(o,"OpsRootQuery"),(0,r.jsx)("div",{style:{flex:1,minHeight:0},children:(0,r.jsx)(O.g,{queryResult:o,children:function(i){var o=i.repositoryOrError;return(null==o?void 0:o.__typename)==="Repository"&&o.usedSolids?(0,r.jsx)(OpsRootWithData,(0,ea._)((0,es._)({},e),{name:n,repoAddress:t,usedSolids:o.usedSolids})):null}})})},OpsRootWithData=function(e){var n=e.name,t=e.repoAddress,s=e.usedSolids,c=(0,l.k6)(),u=(0,l.TH)(),d=ep().parse(u.search,{ignoreQueryPrefix:!0}),p=d.q,h=d.typeExplorer,m=[{token:"name",values:function(){return s.map(function(e){return e.definition.name})}},{token:"job",values:function(){return flatUniq(s.map(function(e){return e.invocations.filter(function(e){return!e.pipeline.isJob}).map(function(e){return e.pipeline.name})}))}},{token:"pipeline",values:function(){return flatUniq(s.map(function(e){return e.invocations.filter(function(e){return e.pipeline.isJob}).map(function(e){return e.pipeline.name})}))}},{token:"input",values:function(){return flatUniq(s.map(function(e){return e.definition.inputDefinitions.map(function(e){return e.type.displayName})}))}},{token:"output",values:function(){return flatUniq(s.map(function(e){return e.definition.outputDefinitions.map(function(e){return e.type.displayName})}))}}],x=(0,ec.HE)(p||"",m),f=s.filter(function(e){var n=!0,t=!1,r=void 0;try{for(var i,o=x[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var s=function(){var n=i.value;if(("name"===n.token||void 0===n.token)&&!e.definition.name.startsWith(n.value)||("pipeline"===n.token||"job"===n.token)&&!e.invocations.some(function(e){return e.pipeline.name===n.value})||"input"===n.token&&!e.definition.inputDefinitions.some(function(e){return e.type.displayName.startsWith(n.value)})||"output"===n.token&&!e.definition.outputDefinitions.some(function(e){return e.type.displayName.startsWith(n.value)}))return{v:!1}}();if("object"===(0,el._)(s))return s.v}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}return!0}),j=s.find(function(e){return e.definition.name===n}),onSearch=function(e){c.replace({search:"?".concat(ep().stringify({q:(0,ec.jP)(e)}))})},onClickOp=function(e){c.replace((0,P.$U)(t,"/ops/".concat(e,"?").concat(ep().stringify({q:p}))))};a.useEffect(function(){1!==f.length||j&&f[0]===j||onClickOp(f[0].definition.name),"string"==typeof h&&onSearch((0,k._)(x).concat([{token:"input",value:h}]))});var g=a.useCallback(function(e){var n=e.pipelineName,r=e.handleID;c.push((0,P.$U)(t,"/pipeline_or_job/".concat(n,"/").concat(r.split(".").join("/"))))},[c,t]);return(0,r.jsx)("div",{style:{height:"100%",display:"flex"},children:(0,r.jsx)(eu.O,{identifier:"ops",firstInitialPercent:40,firstMinSize:420,first:(0,r.jsxs)(eC,{children:[(0,r.jsx)(i.x,{padding:{vertical:12,horizontal:24},border:"bottom",children:(0,r.jsx)(ec.Gf,{values:x,onChange:function(e){return onSearch(e)},suggestionProviders:m,placeholder:"Filter by name or input/output type..."})}),(0,r.jsx)("div",{style:{flex:1},children:(0,r.jsx)(eb,{nonce:window.__webpack_nonce__,children:function(e){var n=e.height,t=e.width;return(0,r.jsx)(OpList,{height:n,width:t,selected:j,onClickOp:onClickOp,items:f.sort(function(e,n){return e.definition.name.localeCompare(n.definition.name)})})}})})]}),second:j?(0,r.jsx)(ey,{children:(0,r.jsx)(UsedSolidDetails,{name:j.definition.name,onClickInvocation:g,repoAddress:t})}):(0,r.jsx)(i.x,{padding:{vertical:64},children:(0,r.jsx)(o.t,{icon:"no-results",title:"No op selected",description:"Select an op to see its definition and invocations"})})})})},OpList=function(e){var n=e.items,t=e.selected,i=a.useRef(new eh.t1({defaultHeight:60,fixedWidth:!0})),o=a.useRef(e.width);e.width!==o.current&&(i.current.clearAll(),o.current=e.width);var s=t?n.findIndex(function(e){return e===t}):void 0;return(0,r.jsx)(eP,{children:(0,r.jsx)(eO,{width:e.width,height:e.height,rowCount:e.items.length,rowHeight:i.current.rowHeight,scrollToIndex:s,className:"solids-list",rowRenderer:function(n){var t=n.parent,o=n.index,s=n.key,a=n.style,l=e.items[o];return(0,r.jsx)(e_,{cache:i.current,index:o,parent:t,children:(0,r.jsxs)(eA,{style:a,$selected:l===e.selected,onClick:function(){return e.onClickOp(l.definition.name)},children:[(0,r.jsx)(eN,{children:l.definition.name}),(0,r.jsx)("div",{children:(0,r.jsx)(eS.z,{definition:l.definition})})]})},s)},overscanRowCount:10})})},eP=F.ZP.div.withConfig({componentId:"sc-c90dcff1-0"})(OpsRoot_templateObject()),eR=(0,p.Ps)(OpsRoot_templateObject1(),eS.C),eA=F.ZP.div.withConfig({componentId:"sc-c90dcff1-1"})(_templateObject2(),function(e){return e.$selected?N.fk():N.v8()},function(e){return e.$selected?N.yM():"transparent"},N.wL(),function(e){return e.$selected?N.Ep():N.$()}),eN=F.ZP.div.withConfig({componentId:"sc-c90dcff1-2"})(_templateObject3()),eC=F.ZP.div.withConfig({componentId:"sc-c90dcff1-3"})(_templateObject4()),WorkspaceOpsRoot=function(e){var n=e.repoAddress;(0,j.Px)();var t=(0,$.Uz)(n);return(0,g.j)("Ops: ".concat(t)),(0,r.jsxs)(i.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,r.jsx)(V.h,{repoAddress:n,tab:"ops"}),(0,r.jsx)(OpsRoot,{repoAddress:n})]})},ek=t(43180),eE=t(72349),ew=t(157),VirtualizedScheduleTable=function(e){var n=e.repoAddress,t=e.schedules,i=e.headerCheckbox,o=e.checkedKeys,s=e.onToggleCheckFactory,l=a.useRef(null),c=(0,w.MG)({count:t.length,getScrollElement:function(){return l.current},estimateSize:function(){return 64},overscan:10}),u=c.getTotalSize(),d=c.getVirtualItems();return(0,r.jsx)("div",{style:{overflow:"hidden"},children:(0,r.jsxs)(z.W2,{ref:l,children:[(0,r.jsx)(eE.o,{checkbox:i}),(0,r.jsx)(z.Nh,{$totalHeight:u,children:d.map(function(e){var a=e.index,l=e.key,c=e.size,u=e.start,d=t[a],p=(0,ew.g)(n,d.name);return(0,r.jsx)(eE.i,{name:d.name,repoAddress:n,scheduleState:d.scheduleState,checked:o.has(p),showCheckboxColumn:!!i,onToggleChecked:s(p),height:c,start:u},l)})})]})})},eT=t(73689),eF=t(30894),eD=t(72855),e$=t(24808),eI=t(30682),ez=t(77376),eL=t(8223);function WorkspaceSchedulesRoot_templateObject(){var e=(0,u._)(["\n  query WorkspaceSchedulesQuery($selector: RepositorySelector!) {\n    repositoryOrError(repositorySelector: $selector) {\n      ... on Repository {\n        id\n        name\n        schedules {\n          id\n          name\n          description\n          scheduleState {\n            id\n            ...BasicInstigationStateFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"]);return WorkspaceSchedulesRoot_templateObject=function(){return e},e}var WorkspaceSchedulesRoot=function(e){var n=e.repoAddress;(0,j.Px)();var t=(0,$.Uz)(n);(0,g.j)("Schedules: ".concat(t));var s=(0,G.$)(n),l=(0,c._)((0,q.q)({queryKey:"search",defaults:{search:""}}),2),u=l[0],p=l[1],h=(0,eL.g)(),m=(0,a.useMemo)(function(){return[h]},[h]),x=(0,ez.m)({filters:m}),f=x.button,v=x.activeFiltersJsx,S=(0,d.a)(eU,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0,variables:{selector:s}});(0,y.Hu)(S,"WorkspaceSchedulesQuery");var b=S.data,_=S.loading,O=(0,B.C4)(S,B.dT),P=u.trim().toLocaleLowerCase(),R=P.length>0,k=(0,a.useMemo)(function(){return(null==b?void 0:b.repositoryOrError.__typename)==="Repository"?b.repositoryOrError.schedules:[]},[b]),E=h.state,w=(0,a.useMemo)(function(){return E.size?k.filter(function(e){var n=e.scheduleState;return E.has(n.status)}):k},[k,E]),T=(0,a.useMemo)(function(){var e=P.toLocaleLowerCase();return w.filter(function(n){return n.name.toLocaleLowerCase().includes(e)})},[w,P]),F=T.length>0,D=(0,a.useMemo)(function(){return T.filter(function(e){var n=e.scheduleState;return(0,eF.i)(n)})},[T]),I=(0,a.useMemo)(function(){return D.map(function(e){var t=e.name;return(0,ew.g)(n,t)})},[D,n]),z=(0,c._)((0,eT.a)(I),2),L=z[0].checkedIds,U=z[1],J=U.onToggleFactory,W=U.onToggleAll,M=(0,a.useMemo)(function(){return D.filter(function(e){var t=e.name;return L.has((0,ew.g)(n,t))}).map(function(e){return{repoAddress:n,scheduleName:e.name,scheduleState:e.scheduleState}})},[D,L,n]),H=I.length,Q=L.size,K=I.length>0;return(0,r.jsxs)(i.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,r.jsx)(V.h,{repoAddress:n,tab:"schedules",refreshState:O,queryData:S}),(0,r.jsxs)(i.x,{padding:{horizontal:24,vertical:16},flex:{justifyContent:"space-between"},children:[(0,r.jsxs)(i.x,{flex:{direction:"row",gap:12},children:[f,(0,r.jsx)(C.oi,{icon:"search",value:u,onChange:function(e){p(e.target.value),W(!1)},placeholder:"Filter by schedule name…",style:{width:"340px"}})]}),(0,r.jsx)(ek.u,{content:"You do not have permission to start or stop these schedules",canShow:F&&!K,placement:"top-end",useDisabledButtonTooltipFix:!0,children:(0,r.jsx)(e$._,{schedules:M,onDone:function(){return O.refetch()}})})]}),v.length?(0,r.jsx)(i.x,{padding:{vertical:8,horizontal:24},border:"top-and-bottom",flex:{direction:"row",gap:8},children:v}):null,_&&!b?(0,r.jsx)(i.x,{padding:64,children:(0,r.jsx)(A.$,{purpose:"page"})}):_&&!b?(0,r.jsx)(i.x,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,r.jsxs)(i.x,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,r.jsx)(A.$,{purpose:"body-text"}),(0,r.jsx)("div",{style:{color:N.$()},children:"Loading schedules…"})]})}):T.length?(0,r.jsx)(VirtualizedScheduleTable,{repoAddress:n,schedules:T,headerCheckbox:K?(0,r.jsx)(eI.W,{checkedCount:Q,totalCount:H,onToggleAll:W}):void 0,checkedKeys:L,onToggleCheckFactory:J}):R?(0,r.jsx)(i.x,{padding:{top:20},children:(0,r.jsx)(o.t,{icon:"search",title:"No matching schedules",description:(0,r.jsxs)("div",{children:["No schedules matching ",(0,r.jsx)("strong",{children:u})," were found in ",t]})})}):(0,r.jsx)(i.x,{padding:{top:20},children:(0,r.jsx)(o.t,{icon:"search",title:"No schedules",description:"No schedules were found in ".concat(t)})})]})},eU=(0,p.Ps)(WorkspaceSchedulesRoot_templateObject(),eD.i,f.B),eJ=t(16592),eW=t(22478),VirtualizedSensorTable=function(e){var n=e.repoAddress,t=e.sensors,i=e.headerCheckbox,o=e.checkedKeys,s=e.onToggleCheckFactory,l=a.useRef(null),c=(0,w.MG)({count:t.length,getScrollElement:function(){return l.current},estimateSize:function(){return 64},overscan:10}),u=c.getTotalSize(),d=c.getVirtualItems();return(0,r.jsx)("div",{style:{overflow:"hidden"},children:(0,r.jsxs)(z.W2,{ref:l,children:[(0,r.jsx)(eJ.KF,{checkbox:i}),(0,r.jsx)(z.Nh,{$totalHeight:u,children:d.map(function(e){var a=e.index,l=e.key,c=e.size,u=e.start,d=t[a],p=(0,eW.x)(n,d.name);return(0,r.jsx)(eJ.Rx,{name:d.name,repoAddress:n,sensorState:d.sensorState,checked:o.has(p),showCheckboxColumn:!!i,onToggleChecked:s(p),height:c,start:u},l)})})]})})},eM=t(67802);function WorkspaceSensorsRoot_templateObject(){var e=(0,u._)(["\n  query WorkspaceSensorsQuery($selector: RepositorySelector!) {\n    repositoryOrError(repositorySelector: $selector) {\n      ... on Repository {\n        id\n        name\n        sensors {\n          id\n          name\n          description\n          sensorState {\n            id\n            ...BasicInstigationStateFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"]);return WorkspaceSensorsRoot_templateObject=function(){return e},e}var WorkspaceSensorsRoot=function(e){var n=e.repoAddress;(0,j.Px)();var t=(0,$.Uz)(n);(0,g.j)("Sensors: ".concat(t));var s=(0,G.$)(n),l=(0,c._)((0,q.q)({queryKey:"search",defaults:{search:""}}),2),u=l[0],p=l[1],h=(0,eL.g)(),m=(0,a.useMemo)(function(){return[h]},[h]),x=(0,ez.m)({filters:m}),f=x.button,v=x.activeFiltersJsx,S=(0,d.a)(eV,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0,variables:{selector:s}});(0,y.Hu)(S,"WorkspaceSensorsQuery");var b=S.data,_=S.loading,O=(0,B.C4)(S,B.dT),P=u.trim().toLocaleLowerCase(),R=P.length>0,k=(0,a.useMemo)(function(){return(null==b?void 0:b.repositoryOrError.__typename)==="Repository"?b.repositoryOrError.sensors:[]},[b]),E=h.state,w=(0,a.useMemo)(function(){return E.size?k.filter(function(e){var n=e.sensorState;return E.has(n.status)}):k},[k,E]),T=(0,a.useMemo)(function(){var e=P.toLocaleLowerCase();return w.filter(function(n){return n.name.toLocaleLowerCase().includes(e)})},[w,P]),F=T.length>0,D=(0,a.useMemo)(function(){return T.filter(function(e){var n=e.sensorState;return(0,eF.i)(n)})},[T]),I=(0,a.useMemo)(function(){return D.map(function(e){var t=e.name;return(0,eW.x)(n,t)})},[D,n]),z=(0,c._)((0,eT.a)(I),2),L=z[0].checkedIds,U=z[1],J=U.onToggleFactory,W=U.onToggleAll,M=(0,a.useMemo)(function(){return D.filter(function(e){var t=e.name;return L.has((0,eW.x)(n,t))}).map(function(e){return{repoAddress:n,sensorName:e.name,sensorState:e.sensorState}})},[D,L,n]),H=I.length,Q=L.size,K=I.length>0;return(0,r.jsxs)(i.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,r.jsx)(V.h,{repoAddress:n,tab:"sensors",refreshState:O,queryData:S}),(0,r.jsxs)(i.x,{padding:{horizontal:24,vertical:16},flex:{justifyContent:"space-between"},children:[(0,r.jsxs)(i.x,{flex:{direction:"row",gap:12},children:[f,(0,r.jsx)(C.oi,{icon:"search",value:u,onChange:function(e){return p(e.target.value)},placeholder:"Filter by sensor name…",style:{width:"340px"}})]}),(0,r.jsx)(ek.u,{content:"You do not have permission to start or stop these sensors",canShow:F&&!K,placement:"top-end",useDisabledButtonTooltipFix:!0,children:(0,r.jsx)(eM.b,{sensors:M,onDone:function(){return O.refetch()}})})]}),v.length?(0,r.jsx)(i.x,{padding:{vertical:8,horizontal:24},border:"top-and-bottom",flex:{direction:"row",gap:8},children:v}):null,_&&!b?(0,r.jsx)(i.x,{padding:64,children:(0,r.jsx)(A.$,{purpose:"page"})}):_&&!b?(0,r.jsx)(i.x,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,r.jsxs)(i.x,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,r.jsx)(A.$,{purpose:"body-text"}),(0,r.jsx)("div",{style:{color:N.$()},children:"Loading sensors…"})]})}):T.length?(0,r.jsx)(VirtualizedSensorTable,{repoAddress:n,sensors:T,headerCheckbox:K?(0,r.jsx)(eI.W,{checkedCount:Q,totalCount:H,onToggleAll:W}):void 0,checkedKeys:L,onToggleCheckFactory:J}):R?(0,r.jsx)(i.x,{padding:{top:20},children:(0,r.jsx)(o.t,{icon:"search",title:"No matching sensors",description:(0,r.jsxs)("div",{children:["No sensors matching ",(0,r.jsx)("strong",{children:u})," were found in ",t]})})}):(0,r.jsx)(i.x,{padding:{top:20},children:(0,r.jsx)(o.t,{icon:"search",title:"No sensors",description:"No sensors were found in ".concat(t)})})]})},eV=(0,p.Ps)(WorkspaceSensorsRoot_templateObject(),eD.i,f.B),eG=t(31197),eB=t(28888),eH=t(56024),eq=t(41222),eQ=t(91351),eK=t(58341),eZ=t(87631),eY=t(74711),eX=t(67216),e0=t(87798),e1=t(40049),e2=t(39852);function AssetGroupRoot_templateObject(){var e=(0,u._)(["\n  query AssetGroupMetadataQuery($selector: AssetGroupSelector!) {\n    assetNodes(group: $selector) {\n      id\n      autoMaterializePolicy {\n        __typename\n      }\n    }\n  }\n"]);return AssetGroupRoot_templateObject=function(){return e},e}var AssetGroupRoot=function(e){var n=e.repoAddress,t=e.tab;(0,j.Px)();var o=(0,l.UO)(),s=o.groupName,c=o[0],u=(0,l.k6)();(0,g.j)("Asset Group: ".concat(s));var d=(0,P.$U)(n,"/asset-groups/".concat(s)),p=(0,a.useMemo)(function(){return{groupName:s,repositoryLocationName:n.location,repositoryName:n.name}},[s,n]),x=(0,a.useCallback)(function(e,n){u[n]({pathname:"".concat(d,"/").concat((0,_.gY)(e)),search:u.location.search})},[d,u]),f=(0,a.useCallback)(function(e){e.groupName&&e.repoAddress?u.push((0,P.$U)(e.repoAddress,"/asset-groups/".concat(e.groupName,"/lineage/").concat(e.assetKey.path.map(encodeURIComponent).join("/")))):u.push((0,eY.p)(e.assetKey,{view:"definition"}))},[u]),v=(0,eX.l)(),y=v.filterFn,S=a.useMemo(function(){return{groupSelector:p,hideNodesMatching:function(e){return!y(e)}}},[p,y]),b=a.useMemo(function(){return{preferAssetRendering:!0,explodeComposites:!0}},[]);return(0,r.jsxs)(eB.T,{style:{display:"flex",flexDirection:"column",paddingBottom:0},children:[(0,r.jsx)(h.m,{title:(0,r.jsx)(m.X6,{children:s}),right:(0,r.jsx)(e2.i,{label:"Reload definitions"}),tags:(0,r.jsx)(AssetGroupTags,{groupSelector:p,repoAddress:n}),tabs:(0,r.jsxs)(i.x,{flex:{direction:"row",justifyContent:"space-between",alignItems:"center"},margin:{right:4},children:[(0,r.jsxs)(eH.mQ,{selectedTabId:t,children:[(0,r.jsx)(e1.f,{id:"lineage",title:"Lineage",to:"".concat(d,"/lineage")}),(0,r.jsx)(e1.f,{id:"list",title:"List",to:"".concat(d,"/list")})]}),(0,r.jsx)(eq.wP,{})]})}),"lineage"===t?(0,r.jsx)(e0.OK,{fetchOptions:S,options:b,explorerPath:(0,_.p3)(c||"lineage/"),onChangeExplorerPath:x,onNavigateToSourceAssetNode:f,assetFilterState:v}):(0,r.jsx)(eQ.fv,{groupSelector:p,prefixPath:c.split("/").map(decodeURIComponent).filter(Boolean),setPrefixPath:function(e){return u.push("".concat(d,"/list/").concat(e.map(encodeURIComponent).join("/")))}})]})},e8=(0,p.Ps)(AssetGroupRoot_templateObject()),AssetGroupTags=function(e){var n,t=e.repoAddress,i=e.groupSelector,o=(0,eK.I)(),s=(0,d.a)(e8,{variables:{selector:i}});(0,y.Hu)(s,"AssetGroupMetadataQuery");var a=s.data;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(x.V,{icon:"asset_group",children:["Asset Group in ",(0,r.jsx)(v.b,{repoAddress:t})]}),(n=null==a?void 0:a.assetNodes)&&0!==n.length&&"has-global-amp"===o&&n.some(function(e){return!!e.autoMaterializePolicy})?(0,r.jsx)(eZ.m,{}):null]})},e4=t(16057),PipelineOrJobDisambiguationRoot=function(e){var n=e.repoAddress,t=(0,l.TH)(),i=(0,l.UO)().pipelinePath,o=(0,_.p3)(i).pipelineName,s=(0,K.Ux)(n),a=(0,K.E8)(s,o),c=t.pathname,u=t.search,d=c.replace("/pipeline_or_job/",a?"/jobs/":"/pipelines/");return(0,r.jsx)(l.l_,{to:"".concat(d).concat(u)})},e6=t(29211),e3=t(1222),e5=t(37563),e7=t(25545),e9=t(78567),ne=t(54949),nn=t(14388);function LaunchpadSetupFromRunRoot_templateObject(){var e=(0,u._)(["\n  query ConfigForRunQuery($runId: ID!) {\n    runOrError(runId: $runId) {\n      ... on Run {\n        id\n        mode\n        runConfigYaml\n        solidSelection\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n"]);return LaunchpadSetupFromRunRoot_templateObject=function(){return e},e}var LaunchpadSetupFromRunRoot=function(e){var n=e.repoAddress,t=(0,ne.xz)(n.location),i=t.permissions.canLaunchPipelineExecution,o=t.loading,s=(0,l.UO)(),a=s.repoPath,c=s.pipelinePath,u=s.runId;return((0,y.j$)("Permissions",o),i)?(0,r.jsx)(LaunchpadSetupFromRunAllowedRoot,{pipelinePath:c,repoAddress:n,runId:u}):(0,r.jsx)(l.l_,{to:"/locations/".concat(a,"/pipeline_or_job/").concat(c)})},LaunchpadSetupFromRunAllowedRoot=function(e){var n=e.pipelinePath,t=e.repoAddress,i=e.runId,o=(0,_.p3)(n),s=o.pipelineName,a=(0,K.Ux)(t),u=(0,K.E8)(a,s);(0,nn.b)(o,u);var p=(0,c._)((0,e9.aC)(t,s),2),h=(p[0],p[1]),m=(0,d.a)(nt,{variables:{runId:i},onCompleted:function(e){var n=null==e?void 0:e.runOrError,t=(null==n?void 0:n.__typename)==="Run"?n:null;if(t){var r=t.runConfigYaml,i=t.mode,o=t.solidSelection;if(r||i||o){var s={name:"From run ".concat(t.id.slice(0,8))};"string"==typeof r&&(s.runConfigYaml=r),"string"==typeof i&&(s.mode=i);var a=null;o instanceof Array&&o.length>0?a=o:"string"==typeof o&&o&&(a=[o]),s.solidSelection=a,s.solidSelectionQuery=a?a.join(","):"*",h(function(e){return(0,e9.f0)(e,s)})}}}});(0,y.Hu)(m,"ConfigForRunQuery");var x=m.data,f=m.loading,j=null==x?void 0:x.runOrError;return f?(0,r.jsx)(e7.m,{}):j&&"RunNotFoundError"!==j.__typename?"PythonError"===j.__typename?(0,r.jsx)(e5.U,{icon:"error",title:"Python error",description:j.message}):(0,r.jsx)(l.l_,{to:{pathname:(0,P.$U)(t,"/".concat(u?"jobs":"pipelines","/").concat(s,"/playground"))}}):(0,r.jsx)(e5.U,{icon:"error",title:"No run found",description:"The run with this ID does not exist or has been cleaned up."})},nt=(0,p.Ps)(LaunchpadSetupFromRunRoot_templateObject(),f.B),LaunchpadSetupRoot=function(e){var n=e.repoAddress,t=(0,ne.xz)(n.location),i=t.permissions.canLaunchPipelineExecution,o=t.loading;(0,y.j$)("Permissions",o);var s=(0,l.UO)(),a=s.repoPath,c=s.pipelinePath;return i?(0,r.jsx)(LaunchpadSetupAllowedRoot,{pipelinePath:c,repoAddress:n}):(0,r.jsx)(l.l_,{to:"/locations/".concat(a,"/pipeline_or_job/").concat(c)})},LaunchpadSetupAllowedRoot=function(e){var n=e.pipelinePath,t=e.repoAddress,i=(0,_.p3)(n),o=i.pipelineName,s=(0,K.Ux)(t),u=(0,K.E8)(s,o);(0,nn.b)(i,u);var d=(0,c._)((0,e9.aC)(t,o),2),p=(d[0],d[1]),h=ep().parse(window.location.search,{ignoreQueryPrefix:!0});return(0,a.useEffect)(function(){if(h.config||h.mode||h.solidSelection||h.tags||h.assetSelection){var e={};"string"==typeof h.config&&(e.runConfigYaml=h.config),"string"==typeof h.mode&&(e.mode=h.mode),h.solidSelection instanceof Array&&h.solidSelection.length>0?e.solidSelection=h.solidSelection:"string"==typeof h.solidSelection&&h.solidSelection&&(e.solidSelection=[h.solidSelection]),"string"==typeof h.solidSelectionQuery&&(e.solidSelectionQuery=h.solidSelectionQuery),Array.isArray(h.tags)&&(e.tags=h.tags),Array.isArray(h.assetSelection)&&(e.assetSelection=h.assetSelection),p(function(n){return(0,e9.f0)(n,e)})}}),(0,r.jsx)(l.l_,{to:{pathname:(0,P.$U)(t,"/".concat(u?"jobs":"pipelines","/").concat(o,"/playground"))}})},nr=t(12084),ni=t(10952),no=t(9001),ns=t(75652),na=t.n(ns),nl=t(95223),nc=t(61935),nu=t(21485),nd=t(84495),np=t(76487),nh=t(38917),nm=t(30301);function LatestRunTag_templateObject(){var e=(0,u._)(["\n  query LatestRunTagQuery($runsFilter: RunsFilter) {\n    pipelineRunsOrError(filter: $runsFilter, limit: 1) {\n      ... on Runs {\n        results {\n          id\n          status\n          ...RunTimeFragment\n        }\n      }\n    }\n  }\n\n  ","\n"]);return LatestRunTag_templateObject=function(){return e},e}var nx={showSeconds:!0,showTimezone:!1},LatestRunTag=function(e){var n=e.pipelineName,t=e.repoAddress,o=(0,d.a)(nf,{variables:{runsFilter:{pipelineName:n,tags:[{key:nd.H.RepositoryLabelTag,value:(0,$.Wg)(t)}]}},notifyOnNetworkStatusChange:!0});(0,B.C4)(o,B.dT);var s=(0,a.useMemo)(function(){var e,n=null===(e=o.data)||void 0===e?void 0:e.pipelineRunsOrError;return n&&"Runs"===n.__typename&&n.results[0]||null},[o]);if(!s)return null;var l={start:s.startTime,end:s.endTime,status:s.status};return(0,r.jsx)(x.V,{intent:function(){switch(s.status){case nc.VOA.SUCCESS:return"success";case nc.VOA.CANCELED:case nc.VOA.CANCELING:case nc.VOA.FAILURE:return"danger";default:return"none"}}(),children:(0,r.jsxs)(i.x,{flex:{direction:"row",alignItems:"center",gap:4},children:[(0,r.jsx)(nu.K9,{status:s.status,size:10}),"Latest run:",l?(0,r.jsx)(ek.u,{placement:"bottom",content:(0,r.jsx)(nl.k6,{children:(0,r.jsxs)("tbody",{children:[(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{style:{color:N.Aw()},children:(0,r.jsx)(i.x,{padding:{right:16},children:"Started"})}),(0,r.jsx)("td",{children:l.start?(0,r.jsx)(nm.v,{timestamp:l.start,timeFormat:nx}):(0,np.Z0)(l.status)})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{style:{color:N.Aw()},children:"Ended"}),(0,r.jsx)("td",{children:l.end?(0,r.jsx)(nm.v,{timestamp:l.end,timeFormat:nx}):(0,np.Z0)(l.status)})]})]})}),children:(0,r.jsx)(T.rU,{to:"/runs/".concat(s.id),children:(0,r.jsx)(nh.Zr,{run:s})})}):null]})})},nf=(0,p.Ps)(LatestRunTag_templateObject(),nh.$X),nj=t(12518),ng=t(66207),nv=t(23054);function JobMetadata_templateObject(){var e=(0,u._)(["\n  query JobMetadataQuery($params: PipelineSelector!, $runsFilter: RunsFilter!) {\n    pipelineOrError(params: $params) {\n      ... on Pipeline {\n        id\n        ...JobMetadataFragment\n      }\n    }\n    assetNodes(pipeline: $params) {\n      id\n      ...JobMetadataAssetNode\n    }\n    pipelineRunsOrError(filter: $runsFilter, limit: 5) {\n      ... on PipelineRuns {\n        results {\n          id\n          ...RunMetadataFragment\n        }\n      }\n    }\n  }\n\n  fragment JobMetadataAssetNode on AssetNode {\n    id\n    autoMaterializePolicy {\n      __typename\n    }\n    assetKey {\n      path\n    }\n  }\n\n  fragment JobMetadataFragment on Pipeline {\n    id\n    isJob\n    name\n    schedules {\n      id\n      mode\n      ...ScheduleSwitchFragment\n    }\n    sensors {\n      id\n      targets {\n        pipelineName\n        mode\n      }\n      ...SensorSwitchFragment\n    }\n  }\n\n  fragment RunMetadataFragment on PipelineRun {\n    id\n    status\n    assets {\n      id\n      key {\n        path\n      }\n    }\n    ...RunTimeFragment\n  }\n\n  ","\n  ","\n  ","\n"]);return JobMetadata_templateObject=function(){return e},e}var JobMetadata=function(e){var n,t=e.pipelineName,i=e.repoAddress,o=(n=(0,d.a)(ny,{variables:{runsFilter:{pipelineName:t,tags:[{key:nd.H.RepositoryLabelTag,value:(0,$.Wg)(i)}]},params:{pipelineName:t,repositoryName:i.name,repositoryLocationName:i.location}}}).data,(0,a.useMemo)(function(){return{assetNodes:(null==n?void 0:n.assetNodes)||null,job:(null==n?void 0:n.pipelineOrError)&&"Pipeline"===n.pipelineOrError.__typename?n.pipelineOrError:null,runsForAssetScan:(null==n?void 0:n.pipelineRunsOrError)&&"Runs"===n.pipelineRunsOrError.__typename?n.pipelineRunsOrError.results:[]}},[n]));return(0,r.jsxs)(r.Fragment,{children:[o.job?(0,r.jsx)(JobScheduleOrSensorTag,{job:o.job,repoAddress:i}):null,(0,r.jsx)(LatestRunTag,{pipelineName:t,repoAddress:i}),o.assetNodes&&o.assetNodes.some(function(e){return!!e.autoMaterializePolicy})&&(0,r.jsx)(eZ.m,{}),o.runsForAssetScan?(0,r.jsx)(RelatedAssetsTag,{relatedAssets:o.assetNodes?o.assetNodes.map(function(e){return(0,en.Je)(e.assetKey)}):na()(o.runsForAssetScan.flatMap(function(e){return e.assets.map(function(e){return(0,en.Je)(e.key)})}))}):null]})},JobScheduleOrSensorTag=function(e){var n=e.job,t=e.repoAddress,i=(0,a.useMemo)(function(){return(null==n?void 0:n.__typename)==="Pipeline"&&n.schedules.length?n.schedules:[]},[n]),o=(0,a.useMemo)(function(){return(null==n?void 0:n.__typename)==="Pipeline"&&n.sensors.length?n.sensors:[]},[n]);return(0,r.jsx)(nj.I,{schedules:i,sensors:o,repoAddress:t})},RelatedAssetsTag=function(e){var n=e.relatedAssets,t=(0,c._)((0,a.useState)(!1),2),o=t[0],s=t[1];if(0===n.length)return null;if(1===n.length){var l=n[0];return(0,r.jsxs)(x.V,{icon:"asset",children:["Asset: ",(0,r.jsx)(T.rU,{to:"/assets/".concat(l),children:l})]})}return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(x.V,{icon:"asset",children:(0,r.jsx)(nr.Z,{color:N.Es(),onClick:function(){return s(!0)},children:"View ".concat(n.length," assets")})}),(0,r.jsxs)(ni.Vq,{title:"Related assets",canOutsideClickClose:!0,canEscapeKeyClose:!0,isOpen:o,onClose:function(){return s(!1)},style:{maxWidth:"80%",minWidth:"500px",width:"auto"},children:[n.map(function(e,t){return(0,r.jsx)(i.x,{padding:{vertical:12,horizontal:20},border:t<n.length-1?"bottom":null,children:(0,r.jsx)(T.rU,{to:"/assets/".concat(e),style:{wordBreak:"break-word"},children:e},e)},e)}),(0,r.jsx)(ni.cN,{topBorder:!0,children:(0,r.jsx)(no.zx,{intent:"primary",onClick:function(){return s(!1)},children:"OK"})})]})]})},ny=(0,p.Ps)(JobMetadata_templateObject(),ng.J,nv.U,nh.$X),nS=t(7575),PipelineNav=function(e){var n=e.repoAddress,t=(0,ne.xz)(n.location),o=(0,a.useContext)(e4.v).tabBuilder,s=(0,l.$B)(["/locations/:repoPath/pipelines/:selector/:tab?","/locations/:repoPath/jobs/:selector/:tab?","/locations/:repoPath/pipeline_or_job/:selector/:tab?"]),c=(0,_.p3)(s.params.selector),u=c.pipelineName,d=c.snapshotId,p=(0,K.Ux)(n),f=null==p?void 0:p.repository.pipelines.find(function(e){return e.name===u}),j=!!(null==f?void 0:f.isJob),g=o({hasLaunchpad:!(null==f?void 0:f.isAssetJob),hasPartitionSet:((null==p?void 0:p.repository.partitionSets)||[]).some(function(e){return e.pipelineName===u})});return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(h.m,{title:(0,r.jsx)(m.X6,{children:u}),tags:(0,r.jsxs)(i.x,{flex:{direction:"row",alignItems:"center",gap:8,wrap:"wrap"},children:[(0,r.jsxs)(x.V,{icon:"job",children:[j?"Job in ":"Pipeline in ",(0,r.jsx)(v.b,{repoAddress:n})]}),d?null:(0,r.jsx)(JobMetadata,{pipelineName:u,repoAddress:n})]}),tabs:(0,r.jsx)(nS.IJ,{repoAddress:n,isJob:j,explorerPath:c,permissions:t,matchingTab:s.params.tab,tabs:g})})})},nb=t(21106),n_=t(83302),nO=t(94611);function JobBackfillsTable_templateObject(){var e=(0,u._)(["\n  query JobBackfillsQuery(\n    $partitionSetName: String!\n    $repositorySelector: RepositorySelector!\n    $cursor: String\n    $limit: Int\n  ) {\n    partitionSetOrError(\n      repositorySelector: $repositorySelector\n      partitionSetName: $partitionSetName\n    ) {\n      ... on PartitionSet {\n        id\n        pipelineName\n        backfills(cursor: $cursor, limit: $limit) {\n          id\n          ...BackfillTableFragment\n        }\n      }\n    }\n  }\n\n  ","\n"]);return JobBackfillsTable_templateObject=function(){return e},e}var JobBackfillsTable=function(e){var n=e.partitionSetName,t=e.partitionNames,s=e.repositorySelector,l=e.refetchCounter,u=(0,c._)((0,a.useState)(function(){return[]}),2),p=u[0],h=u[1],m=(0,c._)((0,a.useState)(),2),x=m[0],f=m[1],j=(0,d.a)(nP,{variables:{partitionSetName:n,repositorySelector:s,cursor:x,limit:10}}),g=j.refetch;return(0,a.useEffect)(function(){l&&g()},[g,l]),(0,r.jsx)(O.g,{queryResult:j,children:function(e){var n=e.partitionSetOrError;if("PartitionSetNotFoundError"===n.__typename)return(0,r.jsx)(i.x,{margin:{vertical:20},children:(0,r.jsx)(o.t,{title:"Partition set not found.",icon:"no-results"})});if("PythonError"===n.__typename)return(0,r.jsx)(i.x,{margin:{vertical:20},children:(0,r.jsx)(o.t,{title:"An error occurred.",icon:"no-results"})});var s=n.backfills,a=n.pipelineName;if(!s.length)return(0,r.jsx)(i.x,{margin:{vertical:20},children:(0,r.jsx)(o.t,{title:"No backfills for ".concat(a),icon:"no-results"})});var l={hasPrevCursor:!!x,hasNextCursor:s&&10===s.length,popCursor:function(){var e=(0,k._)(p);f(e.pop()),h(e)},advanceCursor:function(){x&&h(function(e){return(0,k._)(e).concat([x])});var e=s&&s[s.length-1].id;e&&f(e)},reset:function(){h([]),f(void 0)}};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(nO.G,{backfills:s,refetch:g,showBackfillTarget:!1,allPartitions:t}),(0,r.jsx)(n_.b$,(0,es._)({},l))]})}})},nP=(0,p.Ps)(JobBackfillsTable_templateObject(),nO.b),nR=t(81862),nA=t(22970),nN=t(33379),nC=t(82585),nk=t(62311),nE=t(61599),nw=t(87612),nT=t(87424),nF=t(68052),PartitionRunStatusCheckboxes=function(e){var n=e.counts,t=e.value,o=e.onChange,s=e.allowed,a=e.disabled;return(0,r.jsx)(i.x,{flex:{direction:"row",alignItems:"center",gap:12},style:{overflow:"hidden"},children:s.map(function(e){return(0,r.jsx)(nC.X,{"data-testid":(0,nF.N)("run-status-".concat(e,"-checkbox")),disabled:a,style:{marginBottom:0,marginLeft:10,minWidth:200},checked:t.includes(e)&&!a,label:"".concat((0,nT.fi)(e)," (").concat(n[e],")"),onChange:function(){return o(t.includes(e)?t.filter(function(n){return n!==e}):(0,k._)(t).concat([e]))}},e)})})},nD=t(82329),n$=t(311),nI=t(84692),nz=t(18190),nL=t(56101),nU=t(14877),nJ=t(18970),nW=t(20093);function BackfillSelector_templateObject(){var e=(0,u._)(["\n  query BackfillSelectorQuery($pipelineSelector: PipelineSelector!) {\n    pipelineSnapshotOrError(activePipelineSelector: $pipelineSelector) {\n      ... on PipelineSnapshot {\n        id\n        name\n        solidHandles {\n          handleID\n          solid {\n            name\n            definition {\n              name\n            }\n            inputs {\n              dependsOn {\n                solid {\n                  name\n                }\n              }\n            }\n            outputs {\n              dependedBy {\n                solid {\n                  name\n                }\n              }\n            }\n          }\n          ...GraphExplorerSolidHandleFragment\n        }\n      }\n    }\n    instance {\n      id\n      ...UsingDefaultLauncherAlertInstanceFragment\n      ...DaemonNotRunningAlertInstanceFragment\n    }\n  }\n\n  ","\n  ","\n  ","\n"]);return BackfillSelector_templateObject=function(){return e},e}var BackfillPartitionSelector=function(e){var n=e.partitionSetName,t=e.onLaunch,s=e.onCancel,u=e.onSubmit,p=e.repoAddress,h=e.runStatusData,m=e.pipelineName,x=e.partitionNames,f=(0,l.k6)(),j=(0,c._)(a.useState(Object.keys(h).filter(function(e){return!h[e]||h[e]===nc.VOA.FAILURE})),2),g=j[0],v=j[1],y=(0,c._)(a.useState([nc.VOA.NOT_STARTED,nc.VOA.FAILURE]),2),b=y[0],_=y[1],O=a.useMemo(function(){return g.filter(function(e){return b.includes(h[e])})},[g,b,h]),P=(0,c._)(a.useState(!1),2),R=P[0],C=P[1],k=(0,c._)(a.useState([]),2),w=k[0],T=k[1],F=(0,c._)(a.useState(""),2),D=F[0],$=F[1],I=(0,c._)(a.useState({reexecute:!1,fromFailure:!1}),2),z=I[0],L=I[1],U=(0,G.$)(p),J=(0,d.a)(nM,{variables:{pipelineSelector:(0,ea._)((0,es._)({},U),{pipelineName:m})},fetchPolicy:"network-only"}).data,W=a.useRef(!0);if(a.useEffect(function(){return W.current=!0,function(){W.current=!1}},[t]),!J)return(0,r.jsx)(i.x,{margin:{vertical:32},flex:{justifyContent:"center"},children:(0,r.jsx)(A.$,{purpose:"section"})});if("PipelineSnapshot"!==J.pipelineSnapshotOrError.__typename)return(0,r.jsx)(i.x,{margin:20,children:(0,r.jsx)(o.t,{icon:"error",title:"Could not fetch job details"})});var M=J.pipelineSnapshotOrError,V=J.instance,B=(0,S.i)(M.solidHandles).map(function(e){return e.solid}),H=(0,nD.V)(B,D),q=(0,nz.tc)({nodes:H.all,mode:nI.hS.FLAT}).boxes.map(function(e){return{x:e.x,name:e.node.name}}),isFailed=function(e){return h[e]===nc.VOA.FAILURE},Q=x.filter(isFailed),K=function(e){var n=(o={},(0,nw._)(o,nc.VOA.SUCCESS,0),(0,nw._)(o,nc.VOA.NOT_STARTED,0),(0,nw._)(o,nc.VOA.FAILURE,0),(0,nw._)(o,nc.VOA.QUEUED,0),(0,nw._)(o,nc.VOA.STARTED,0),o),t=!0,r=!1,i=void 0;try{for(var o,s,a=e[Symbol.iterator]();!(t=(s=a.next()).done);t=!0){var l=s.value;n[l.state]=(n[l.state]||0)+1}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return n}(g.map(function(e){return{partitionKey:e,state:h[e]}}));return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ni.a7,{children:(0,r.jsxs)(i.x,{flex:{direction:"column",gap:24},children:[(0,r.jsxs)(Section,{title:"Partitions",children:[(0,r.jsx)(i.x,{children:"Select partitions to materialize. Click and drag to select a range on the timeline."}),(0,r.jsx)(nE.x,{selected:g,setSelected:function(e){var n=new Set(e);v(x.filter(function(e){return n.has(e)})),z.fromFailure&&e.filter(function(e){return!isFailed(e)}).length>0&&L((0,ea._)((0,es._)({},z),{fromFailure:!1}))},health:{runStatusForPartitionKey:function(e){return h[e]}},partitionKeys:x,dimensionType:(0,n$.vH)(x[0])?nc.iVC.TIME_WINDOW:nc.iVC.STATIC}),(0,r.jsx)(PartitionRunStatusCheckboxes,{value:b,onChange:_,counts:K,allowed:z.fromFailure?[nc.VOA.FAILURE]:[nc.VOA.NOT_STARTED,nc.VOA.FAILURE,nc.VOA.QUEUED,nc.VOA.STARTED,nc.VOA.SUCCESS]})]}),Q.length?(0,r.jsx)(Section,{title:"Reexecution",children:(0,r.jsx)(nC.X,{checked:z.fromFailure,disabled:!O.every(isFailed),onChange:function(){var e=(0,ea._)((0,es._)({},z),{fromFailure:!z.fromFailure,reexecute:!z.reexecute});e.fromFailure&&_([nc.VOA.FAILURE]),$(""),L(e)},label:(0,r.jsxs)(i.x,{flex:{display:"inline-flex",alignItems:"center"},children:[(0,r.jsx)(i.x,{margin:{right:4},children:"Re-execute from failures"}),(0,r.jsx)(ek.u,{placement:"top",content:"For each partition, if the most recent run failed, launch a re-execution starting from the steps that failed. Only applies for selections of failed partitions.",children:(0,r.jsx)(E.JO,{name:"info",color:N.md()})})]})})}):null,(0,r.jsx)(Section,{title:(0,r.jsxs)(i.x,{flex:{display:"inline-flex",alignItems:"center"},children:[(0,r.jsx)(i.x,{margin:{right:4},children:"Step subset"}),(0,r.jsx)(ek.u,{placement:"top",content:"Applies a step-selection to each run for the requested partitions.",children:(0,r.jsx)(E.JO,{name:"info",color:N.md()})})]}),children:(0,r.jsxs)(i.x,{flex:{direction:"row",alignItems:"center",gap:12},children:[(0,r.jsx)(nW.j,{disabled:z.fromFailure,width:520,items:B,value:D,placeholder:"Type a step subset",onChange:$,autoApplyChanges:!0}),D?(0,r.jsxs)("div",{style:{color:N.$()},children:[q.length," step",1===q.length?"":"s"," selected"]}):null]})}),(0,r.jsxs)(Section,{title:"Tags",children:[(0,r.jsx)(nJ.U,{tagsFromSession:w,onChange:T,open:R,onRequestClose:function(){return C(!1)}}),w.length?(0,r.jsx)("div",{style:{border:"1px solid ".concat(N.im()),borderRadius:8,padding:3},children:(0,r.jsx)(nJ.x,{tagsFromSession:w,onRequestEdit:function(){return C(!0)}})}):(0,r.jsx)("div",{children:(0,r.jsx)(no.zx,{onClick:function(){return C(!0)},children:"Add tags to backfill runs"})})]}),(0,r.jsxs)(i.x,{flex:{direction:"column",gap:16},children:[(0,r.jsx)(nk.So,{instance:V}),(0,r.jsx)(nk.d,{instance:V})]})]})}),(0,r.jsxs)(ni.cN,{children:[(0,r.jsx)(no.zx,{intent:"none",onClick:s,children:"Cancel"}),(0,r.jsx)(LaunchBackfillButton,{partitionNames:O,partitionSetName:n,reexecutionSteps:!z.fromFailure&&H.all.length<B.length?q.map(function(e){return e.name}):void 0,fromFailure:z.fromFailure,tags:w,onSubmit:u,onSuccess:function(e){(0,nk.Xd)(f,e,!1),null==t||t(e,D)},onError:function(e){(0,nk.mv)(e)},repoAddress:p})]})]})},LaunchBackfillButton=function(e){var n,t=e.partitionSetName,i=e.partitionNames,o=e.reexecutionSteps,s=e.fromFailure,l=e.tags,u=e.onSuccess,d=e.onError,p=e.onSubmit,h=e.repoAddress,m=(0,G.$)(h),x=a.useRef(!0),f=(0,c._)((0,nN.D)(nL.f),2),j=f[0],g=f[1].loading;a.useEffect(function(){return x.current=!0,function(){x.current=!1}},[u]);var v=(n=(0,nR._)(function(){var e;return(0,nA.Jh)(this,function(n){switch(n.label){case 0:return p(),[4,j({variables:{backfillParams:{selector:{partitionSetName:t,repositorySelector:m},partitionNames:i,reexecutionSteps:o,fromFailure:s,tags:l}}})];case 1:if(e=n.sent().data,!x.current)return[2];return e&&"LaunchBackfillSuccess"===e.launchPartitionBackfill.__typename?null==u||u(e.launchPartitionBackfill.backfillId,!1):null==d||d(e),[2]}})}),function(){return n.apply(this,arguments)}),y=i.length,S=null==o?void 0:o.length,b=[g?"Submitting ".concat(y," ").concat(1===y?"run":"runs","…"):y?"Submit ".concat(y," ").concat(1===y?"run":"runs"):"Select partitions to submit",!g&&S?"(".concat(S," selected ").concat(1===S?"step":"steps",")"):""].join(" ");return(0,r.jsx)(nU.C,{runCount:y,config:{title:b,icon:"open_in_new",disabled:!y||g,onClick:v}})},nM=(0,p.Ps)(BackfillSelector_templateObject(),b.Q,nk.op,nk.EC),Section=function(e){var n=e.title,t=e.children;return(0,r.jsxs)(i.x,{flex:{direction:"column",gap:4},children:[(0,r.jsx)(m.pm,{children:n}),(0,r.jsx)(i.x,{flex:{direction:"column",gap:8},padding:{top:16},border:"top",children:t})]})},nV=t(343),nG=t(46032);function PartitionGraph_templateObject(){var e=(0,u._)(["\n  display: flex;\n  color: ",";\n  padding: 24px 12px;\n  text-decoration: none;\n"]);return PartitionGraph_templateObject=function(){return e},e}var PartitionGraph=function(e){var n,t,i=e.partitionNames,o=e.jobDataByPartition,s=e.stepDataByPartition,l=e.title,u=e.yLabel,d=e.isJob,p=e.hiddenStepKeys,h=(0,c._)((0,a.useState)(function(){return{}}),2),m=h[0],x=h[1],f=(0,a.useRef)(null),j=(0,a.useCallback)(function(e){var n=f.current;if(n){var t=n.scales["x-axis-0"];if(t){var r=e.offsetX,i=e.offsetY;if("click"===e.type&&r<=n.chartArea.right&&r>=n.chartArea.left&&i<=n.chartArea.bottom&&i>=n.chartArea.top&&e.shiftKey){var o=t.getValueForPixel(r),s=n.data.labels[o];x(function(e){return(0,ea._)((0,es._)({},e),(0,nw._)({},s,!e[s]))})}}}},[]),g=(0,a.useMemo)(function(){return{title:l?{display:!0,text:l}:void 0,animation:!1,scales:u?{y:{id:"y",title:{display:!0,text:u}},x:{id:"x",title:{display:!0,text:l}}}:void 0,plugins:{legend:{display:!1,onClick:function(e,n){}}},onClick:j,maintainAspectRatio:!1}},[j,l,u]),v=(n=[],t={},i.forEach(function(e){var r=!!m[e];o&&n.push({x:e,y:r?void 0:o[e]}),s&&Object.entries(s[e]||{}).forEach(function(n){var i=(0,c._)(n,2),o=i[0],s=i[1];(null==p||!p.includes(o))&&s&&(t[o]=(0,k._)(t[o]||[]).concat([{x:e,y:r?void 0:s}]))})}),Object.keys(t).forEach(function(e){t[e]=_fillPartitions(i,t[e])}),{jobData:n,stepData:t}),y=v.jobData,S=v.stepData,b=d?"Total job":"Total pipeline",_={labels:i,datasets:(0,k._)(!o||p&&p.includes(b)?[]:[{label:b,data:y,borderColor:N.im(),backgroundColor:N.Bj()}]).concat((0,k._)(Object.keys(S).map(function(e){return{label:e,data:S[e],borderColor:(0,nG.kU)(e),backgroundColor:N.Bj()}})))};return(0,r.jsx)(nB,{children:(0,r.jsx)(nV.x1,{data:function(){return _},height:300,options:g,ref:f})})},_fillPartitions=function(e,n){var t={};return n.forEach(function(e){t[e.x]=e.y}),e.map(function(e){return{x:e,y:t[e]}})},nB=F.ZP.div.withConfig({componentId:"sc-d897c5f0-0"})(PartitionGraph_templateObject(),N.$()),nH=t(52246),nq=t(79321),nQ=t(6749),nK=t(6871),nZ=t(56266);function OpJobPartitionsView_templateObject(){var e=(0,u._)(["\n  query PartitionsStatusQuery(\n    $partitionSetName: String!\n    $repositorySelector: RepositorySelector!\n  ) {\n    partitionSetOrError(\n      repositorySelector: $repositorySelector\n      partitionSetName: $partitionSetName\n    ) {\n      ... on PartitionSet {\n        id\n        ...OpJobPartitionSet\n      }\n      ... on PartitionSetNotFoundError {\n        message\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  fragment OpJobPartitionSet on PartitionSet {\n    id\n    name\n    pipelineName\n    partitionsOrError {\n      ... on Partitions {\n        results {\n          name\n        }\n      }\n      ...PythonErrorFragment\n    }\n    partitionStatusesOrError {\n      ... on PartitionStatuses {\n        results {\n          id\n          ...OpJobPartitionStatus\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  fragment OpJobPartitionStatus on PartitionStatus {\n    id\n    partitionName\n    runStatus\n    runDuration\n  }\n\n  ","\n"]);return OpJobPartitionsView_templateObject=function(){return e},e}var OpJobPartitionsView=function(e){var n=e.partitionSetName,t=e.repoAddress,s=(0,G.$)(t),a=(0,d.a)(nY,{variables:{partitionSetName:n,repositorySelector:s}}),l=a.data,c=a.loading;if(!l)return c?(0,r.jsx)(i.x,{padding:32,flex:{direction:"column",alignItems:"center"},children:(0,r.jsxs)(i.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,r.jsx)(A.$,{purpose:"body-text"}),(0,r.jsx)("div",{children:"Loading partitions…"})]})}):(0,r.jsx)(i.x,{padding:32,children:(0,r.jsx)(o.t,{icon:"error",title:"An error occurred",description:"An unexpected error occurred."})});var u=l.partitionSetOrError;if("PartitionSetNotFoundError"===u.__typename)return(0,r.jsx)(i.x,{padding:32,children:(0,r.jsx)(o.t,{icon:"search",title:"Partition set not found",description:u.message})});if("PythonError"===u.__typename)return(0,r.jsx)(i.x,{padding:32,children:(0,r.jsx)(nZ.T9,{error:u})});if("PythonError"===u.partitionsOrError.__typename)return(0,r.jsx)(i.x,{padding:32,children:(0,r.jsx)(nZ.T9,{error:u.partitionsOrError})});var p=u.partitionsOrError.results.map(function(e){return e.name});return(0,r.jsx)(OpJobPartitionsViewContent,{partitionNames:p,partitionSet:u,repoAddress:t})};function usePartitionDurations(e){return(0,a.useMemo)(function(){var n={},t={};return e.forEach(function(e){if(e.runsLoaded&&0!==e.runs.length){var r=e.runs.sort(function(e,n){return e.startTime||0-(n.startTime||0)}),i=r[r.length-1];n[e.name]={},t[e.name]=(null==i?void 0:i.endTime)&&(null==i?void 0:i.startTime)?i.endTime-i.startTime:void 0,i.stepStats.forEach(function(t){n[e.name][t.stepKey]=[t.endTime&&t.startTime?t.endTime-t.startTime:void 0]})}}),{runDurationData:t,stepDurationData:n}},[e])}var OpJobPartitionsViewContent=function(e){var n=e.partitionSet,t=e.partitionNames,o=e.repoAddress,s=(0,ne.xz)(o.location),l=s.permissions.canLaunchPartitionBackfill,u=s.disabledReasons,d=(0,nb.S)(),p=d.viewport,h=d.containerProps,x=(0,c._)((0,a.useState)(60),2),f=x[0],j=x[1],g=(0,c._)((0,a.useState)(0),2),v=g[0],y=g[1],S=(0,c._)((0,a.useState)(!1),2),b=S[0],_=S[1],O=(0,c._)((0,a.useState)(!1),2),P=O[0],R=O[1],A=(0,c._)((0,a.useState)(!1),2),N=A[0],C=A[1],k=(0,G.$)(o),w=(0,c._)((0,a.useState)(0),2),T=w[0],F=w[1],D=(0,nK.T)({partitionSetName:n.name,partitionTagName:nd.H.Partition,partitionNames:t,pageSize:f,runsFilter:[],repositorySelector:k,jobName:n.pipelineName,offset:v,skipQuery:!b});(0,a.useEffect)(function(){p.width&&!b&&j((0,nq.Rc)(p.width-nQ.AQ))},[p.width,b,j]);var $=b?t.slice(Math.max(0,t.length-1-v-f),t.length-v):t,I=usePartitionDurations(D).stepDurationData,z=(0,a.useCallback)(function(){return C(!0)},[]),L=n.partitionStatusesOrError,U=(0,a.useMemo)(function(){return"PartitionStatuses"===L.__typename?L.results:[]},[L]),J=(0,a.useMemo)(function(){var e={},n={};return U.forEach(function(t){e[t.partitionName]=t.runStatus||nc.VOA.NOT_STARTED,$.includes(t.partitionName)&&(n[t.partitionName]=t.runDuration||void 0)}),{runStatusData:e,runDurationData:n}},[U,$]),W=J.runStatusData,M=J.runDurationData,V=(0,a.useMemo)(function(){return{runStatusForPartitionKey:function(e){return W[e]}}},[W]);return(0,r.jsxs)("div",{children:[(0,r.jsx)(ni.Vq,{canEscapeKeyClose:!N,canOutsideClickClose:!N,onClose:function(){return R(!1)},style:{width:800,zIndex:1e3},title:"Launch ".concat(n.pipelineName," backfill"),isOpen:P,children:P&&(0,r.jsx)(BackfillPartitionSelector,{partitionSetName:n.name,partitionNames:t,runStatusData:W,pipelineName:n.pipelineName,onCancel:function(){return R(!1)},onLaunch:function(e,n){F(T+1),R(!1)},onSubmit:z,repoAddress:o})}),(0,r.jsxs)(i.x,{flex:{justifyContent:"space-between",direction:"row",alignItems:"center"},border:"bottom",padding:{vertical:16,horizontal:24},children:[(0,r.jsx)(m.pm,{children:"Status"}),(0,r.jsxs)(i.x,{flex:{gap:8},children:[(0,r.jsx)(no.zx,{onClick:function(){return _(!b)},active:P,children:b?"Hide per-step status":"Show per-step status"}),l?(0,r.jsx)(no.zx,{onClick:function(){return R(!P)},icon:(0,r.jsx)(E.JO,{name:"add_circle"}),active:P,children:"Launch backfill…"}):(0,r.jsx)(ek.u,{content:u.canLaunchPartitionBackfill,children:(0,r.jsx)(no.zx,{icon:(0,r.jsx)(E.JO,{name:"add_circle"}),disabled:!0,children:"Launch backfill…"})})]})]}),(0,r.jsxs)(i.x,{flex:{direction:"row",alignItems:"center"},border:"bottom",padding:{left:8},children:[(0,r.jsx)(CountBox,{count:t.length,label:"Total partitions"}),(0,r.jsx)(CountBox,{count:t.filter(function(e){return W[e]===nc.VOA.FAILURE}).length,label:"Failed partitions"}),(0,r.jsx)(CountBox,{count:t.filter(function(e){return!W[e]||W[e]===nc.VOA.NOT_STARTED}).length,label:"Missing partitions"})]}),(0,r.jsxs)(i.x,{padding:{vertical:16,horizontal:24},children:[(0,r.jsx)("div",(0,ea._)((0,es._)({},h),{children:(0,r.jsx)(nH.b,{partitionNames:t,health:V,selected:b?$:void 0,selectionWindowSize:f,onClick:function(e){var n=t.length-1;y(Math.min(n,Math.max(0,n-t.indexOf(e)-.5*f))),b||_(!0)},tooltipMessage:"Click to view per-step status"})})),b?(0,r.jsx)(i.x,{margin:{top:16},children:(0,r.jsx)(nq.ux,{partitionNames:t,partitions:D,pipelineName:n.pipelineName,repoAddress:o,setPageSize:j,offset:v,setOffset:y})}):null]}),(0,r.jsx)(i.x,{padding:{horizontal:24,vertical:16},border:"top-and-bottom",children:(0,r.jsx)(m.pm,{children:"Run duration"})}),(0,r.jsx)(i.x,{margin:24,children:(0,r.jsx)(PartitionGraph,{isJob:!0,title:"Execution time by partition",yLabel:"Execution time (secs)",partitionNames:b?$:t,jobDataByPartition:M})}),b?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.x,{padding:{horizontal:24,vertical:16},children:(0,r.jsx)(m.pm,{children:"Step duration"})}),(0,r.jsx)(i.x,{margin:24,children:(0,r.jsx)(PartitionGraph,{isJob:!0,title:"Execution time by partition",yLabel:"Execution time (secs)",partitionNames:$,stepDataByPartition:I})})]}):null,(0,r.jsx)(i.x,{padding:{horizontal:24,vertical:16},border:"top-and-bottom",style:{marginBottom:-1},children:(0,r.jsx)(m.pm,{children:"Backfill history"})}),(0,r.jsx)(i.x,{margin:{bottom:20},children:(0,r.jsx)(JobBackfillsTable,{partitionSetName:n.name,repositorySelector:k,partitionNames:t,refetchCounter:T})})]})},CountBox=function(e){var n=e.count,t=e.label;return(0,r.jsxs)(i.x,{padding:16,style:{flex:1},border:"right",children:[(0,r.jsx)("div",{style:{fontSize:18,marginBottom:4},children:(0,r.jsx)("strong",{children:n})}),(0,r.jsx)("div",{children:t})]})},nY=(0,p.Ps)(OpJobPartitionsView_templateObject(),f.B),nX=t(49577),n0=t(24601),n1=t(7872),n2=t(185),n8=t(54877),AssetJobPartitionsView=function(e){var n=e.partitionSetName,t=e.repoAddress,o=e.pipelineName,s=(0,nb.S)(),l=s.viewport,u=s.containerProps,d=(0,G.$)(t),p=(0,n0.uc)("*",{pipelineSelector:{pipelineName:o,repositoryName:t.name,repositoryLocationName:t.location}}),h=(0,n8.mR)(p.graphAssetKeys),x=(0,a.useMemo)(function(){var e=(0,n$.$G)(h.filter(function(e){return e.dimensions.length>0})),n=e.dimensions.map(function(e){return{selectedKeys:e.partitionKeys,selectedRanges:[(0,nX.$0)(e)],dimension:e}}),t=(0,n$.ju)(n,function(n){return e.stateForKeyIdx(n).includes(n1.yo.MISSING)});return{merged:e,total:(0,n8.xD)(n),missing:t.length}},[h]),f=x.total,j=x.missing,g=x.merged,v=(0,c._)((0,a.useState)(60),2),y=v[0],S=v[1],b=(0,c._)((0,a.useState)(0),2),_=b[0],O=b[1],P=(0,c._)((0,a.useState)(!1),2),R=P[0],A=P[1];(0,a.useEffect)(function(){l.width&&S((0,nq.Rc)(l.width-nQ.AQ))},[l.width,S]);var N=g.dimensions.findIndex(n$.nv);-1===N&&(N=0);var C=g.dimensions[N]?g.dimensions[N]:null,k=(null==C?void 0:C.partitionKeys)||[],E=k.slice(Math.max(0,k.length-1-_-y),k.length-_);return(0,r.jsxs)("div",{children:[(0,r.jsxs)(i.x,{flex:{justifyContent:"space-between",direction:"row",alignItems:"center"},border:"bottom",padding:{vertical:16,horizontal:24},children:[(0,r.jsx)(m.pm,{children:"Status"}),(0,r.jsxs)(i.x,{flex:{gap:8},children:[(0,r.jsx)(no.zx,{onClick:function(){return A(!R)},children:R?"Hide per-asset status":"Show per-asset status"}),(0,r.jsx)(n2.XE,{scope:{all:p.graphQueryItems.map(function(e){return e.node}),skipAllTerm:!0},preferredJobName:o})]})]}),(0,r.jsxs)(i.x,{flex:{direction:"row",alignItems:"center"},border:"bottom",padding:{left:8},children:[(0,r.jsx)(CountBox,{count:f,label:"Total partitions"}),(0,r.jsx)(CountBox,{count:j,label:"Missing partitions"})]}),(0,r.jsxs)(i.x,{padding:{vertical:16,horizontal:24},children:[(0,r.jsx)("div",(0,ea._)((0,es._)({},u),{children:(0,r.jsx)(nH.b,{partitionNames:k,splitPartitions:!!C&&!(0,n$.nv)(C),health:{ranges:g.rangesForSingleDimension(N)},selected:E,selectionWindowSize:y,tooltipMessage:"Click to view per-asset status",onClick:function(e){var n=k.length-1;O(Math.min(n,Math.max(0,n-k.indexOf(e)-.5*y)))}})})),R&&C&&(0,r.jsx)(i.x,{margin:{top:16},children:(0,r.jsx)(nq.ac,{rangeDimensionIdx:N,rangeDimension:C,assetHealth:h,assetQueryItems:p.graphQueryItems,pipelineName:o,setPageSize:S,offset:_,setOffset:O})})]}),R&&(0,r.jsx)(AssetJobPartitionGraphs,{repositorySelector:d,pipelineName:o,partitionSetName:n,multidimensional:((null==g?void 0:g.dimensions.length)||0)>1,dimensionName:C?C.name:null,dimensionKeys:k,selected:E,offset:_,pageSize:y}),(0,r.jsx)(i.x,{padding:{horizontal:24,vertical:16},border:"top-and-bottom",style:{marginBottom:-1},children:(0,r.jsx)(m.pm,{children:"Backfill history"})}),(0,r.jsx)(i.x,{margin:{bottom:20},children:(0,r.jsx)(JobBackfillsTable,{partitionSetName:n,repositorySelector:d,partitionNames:k,refetchCounter:1})})]})},AssetJobPartitionGraphs=function(e){var n=e.repositorySelector,t=e.dimensionKeys,o=e.dimensionName,s=e.selected,a=e.pageSize,l=e.partitionSetName,c=e.multidimensional,u=e.pipelineName,d=e.offset,p=usePartitionDurations((0,nK.T)({partitionSetName:l,partitionTagName:c?"".concat(nd.H.Partition,"/").concat(o):nd.H.Partition,partitionNames:t,repositorySelector:n,pageSize:a,runsFilter:[],jobName:u,offset:d,skipQuery:!o})),h=p.stepDurationData,x=p.runDurationData;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.x,{padding:{horizontal:24,vertical:16},border:"top-and-bottom",children:(0,r.jsx)(m.pm,{children:"Run duration"})}),(0,r.jsx)(i.x,{margin:24,children:(0,r.jsx)(PartitionGraph,{isJob:!0,title:"Execution time by partition",yLabel:"Execution time (secs)",partitionNames:s,jobDataByPartition:x})}),(0,r.jsx)(i.x,{padding:{horizontal:24,vertical:16},border:"top-and-bottom",children:(0,r.jsx)(m.pm,{children:"Step durations"})}),(0,r.jsx)(i.x,{margin:24,children:(0,r.jsx)(PartitionGraph,{isJob:!0,title:"Execution time by partition",yLabel:"Execution time (secs)",partitionNames:s,stepDataByPartition:h})})]})};function usePartitionNameForPipeline_templateObject(){var e=(0,u._)(["\n  query AssetJobPartitionSetsQuery(\n    $pipelineName: String!\n    $repositoryName: String!\n    $repositoryLocationName: String!\n  ) {\n    partitionSetsOrError(\n      pipelineName: $pipelineName\n      repositorySelector: {\n        repositoryName: $repositoryName\n        repositoryLocationName: $repositoryLocationName\n      }\n    ) {\n      ... on PipelineNotFoundError {\n        message\n      }\n      ... on PartitionSets {\n        results {\n          id\n          name\n          mode\n          solidSelection\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n"]);return usePartitionNameForPipeline_templateObject=function(){return e},e}var n4=(0,p.Ps)(usePartitionNameForPipeline_templateObject(),f.B),PipelinePartitionsRoot=function(e){var n,t,s=e.repoAddress,c=(0,l.UO)(),u=c.pipelinePath,p=(0,_.p3)(u),h=p.pipelineName,m=(0,K.Ux)(s),x=null==m?void 0:m.repository.pipelines.find(function(e){return e.name===h}),f=!!(null==x?void 0:x.isJob),j=!!(null==x?void 0:x.isAssetJob);(0,nn.b)(p,f),(0,_.Bj)(c);var g=(n=(0,d.a)(n4,{skip:!h,variables:{repositoryLocationName:s.location,repositoryName:s.name,pipelineName:h}}),(0,y.Hu)(n,"AssetJobPartitionSetsQuery",{skip:!h}),t=n.data,(0,a.useMemo)(function(){return{partitionSet:(null==t?void 0:t.partitionSetsOrError.__typename)==="PartitionSets"?t.partitionSetsOrError.results[0]:void 0,partitionSetError:(null==t?void 0:t.partitionSetsOrError.__typename)==="PipelineNotFoundError"||(null==t?void 0:t.partitionSetsOrError.__typename)==="PythonError"?t.partitionSetsOrError:void 0}},[t])),v=g.partitionSet,S=g.partitionSetError;return v||S?S?(0,r.jsx)(i.x,{padding:{vertical:64},children:(0,r.jsx)(o.t,{icon:"error",title:"Partitions",description:S.message})}):v?j?(0,r.jsx)(AssetJobPartitionsView,{pipelineName:h,partitionSetName:v.name,repoAddress:s}):(0,r.jsx)(OpJobPartitionsView,{partitionSetName:v.name,repoAddress:s}):(0,r.jsx)(i.x,{padding:{vertical:64},children:(0,r.jsx)(o.t,{icon:"error",title:"Partitions",description:(0,r.jsxs)("div",{children:["There are no partition sets defined for ",f?"job":"pipeline"," ",(0,r.jsx)("code",{children:h}),"."]})})}):(0,r.jsx)(O.T,{purpose:"page"})},PipelineRoot=function(e){var n=e.repoAddress,t=(0,a.useContext)(e4.v).FallthroughRoute;return(0,r.jsxs)("div",{style:{display:"flex",flexDirection:"column",minWidth:0,width:"100%",height:"100%"},children:[(0,r.jsx)(PipelineNav,{repoAddress:n}),(0,r.jsxs)(l.rs,{children:[(0,r.jsx)(l.AW,{path:"/locations/:repoPath/pipeline_or_job/:pipelinePath(/?.*)",children:(0,r.jsx)(PipelineOrJobDisambiguationRoot,{repoAddress:n})}),(0,r.jsx)(l.AW,{path:["/locations/:repoPath/pipelines/:pipelinePath/playground/setup","/locations/:repoPath/jobs/:pipelinePath/playground/setup"],children:(0,r.jsx)(LaunchpadSetupRoot,{repoAddress:n})}),(0,r.jsx)(l.AW,{path:["/locations/:repoPath/pipelines/:pipelinePath/playground/setup-from-run/:runId","/locations/:repoPath/jobs/:pipelinePath/playground/setup-from-run/:runId"],children:(0,r.jsx)(LaunchpadSetupFromRunRoot,{repoAddress:n})}),(0,r.jsx)(l.AW,{path:["/locations/:repoPath/pipelines/:pipelinePath/playground","/locations/:repoPath/jobs/:pipelinePath/playground"],children:(0,r.jsx)(e3.H,{repoAddress:n})}),(0,r.jsx)(l.AW,{path:["/locations/:repoPath/pipelines/:pipelinePath/runs/:runId","/locations/:repoPath/jobs/:pipelinePath/runs/:runId"],render:function(e){return(0,r.jsx)(l.l_,{to:"/runs/".concat(e.match.params.runId)})}}),(0,r.jsx)(l.AW,{path:["/locations/:repoPath/pipelines/:pipelinePath/runs","/locations/:repoPath/jobs/:pipelinePath/runs"],children:(0,r.jsx)(e6.G,{repoAddress:n})}),(0,r.jsx)(l.AW,{path:["/locations/:repoPath/pipelines/:pipelinePath/partitions","/locations/:repoPath/jobs/:pipelinePath/partitions"],children:(0,r.jsx)(PipelinePartitionsRoot,{repoAddress:n})}),(0,r.jsx)(l.AW,{path:["/locations/:repoPath/pipelines/:pipelinePath/overview","/locations/:repoPath/jobs/:pipelinePath/overview"],render:function(e){return(0,r.jsx)(l.l_,{to:"/locations/".concat(e.match.url.replace(/\/overview$/i,""))})}}),(0,r.jsx)(l.AW,{path:["/locations/:repoPath/pipelines/(/?.*)","/locations/:repoPath/jobs/(/?.*)"],children:(0,r.jsx)(t,{repoAddress:n})})]})]})},n6=t(56043),n3=t(76588),n5=t(59692),n7=t(49280);function SchedulePartitionStatus_templateObject(){var e=(0,u._)(["\n  query SchedulePartitionStatusQuery($scheduleSelector: ScheduleSelector!) {\n    scheduleOrError(scheduleSelector: $scheduleSelector) {\n      ... on Schedule {\n        id\n        ...SchedulePartitionStatusFragment\n      }\n    }\n  }\n\n  fragment SchedulePartitionStatusFragment on Schedule {\n    id\n    mode\n    pipelineName\n    partitionSet {\n      id\n      name\n      partitionStatusesOrError {\n        ... on PartitionStatuses {\n          results {\n            id\n            ...SchedulePartitionStatusResult\n          }\n        }\n      }\n    }\n  }\n\n  fragment SchedulePartitionStatusResult on PartitionStatus {\n    id\n    partitionName\n    runStatus\n  }\n"]);return SchedulePartitionStatus_templateObject=function(){return e},e}var n9=["Succeeded","Failed","Missing","Pending"],calculateDisplayStatus=function(e){switch(e.runStatus){case null:return"Missing";case nc.VOA.SUCCESS:return"Succeeded";case nc.VOA.FAILURE:case nc.VOA.CANCELED:case nc.VOA.CANCELING:return"Failed";case nc.VOA.MANAGED:case nc.VOA.QUEUED:case nc.VOA.NOT_STARTED:case nc.VOA.STARTED:case nc.VOA.STARTING:return"Pending";default:return(0,nG.UT)(e.runStatus)}},te=(0,a.memo)(function(e){var n=e.repoAddress,t=e.schedule,i=(0,K.Ux)(n),o=t.name,s=t.partitionSet,l=t.pipelineName,u=null==s?void 0:s.name,d=(0,K.E8)(i,l),p=(0,a.useMemo)(function(){var e=u?ep().stringify({partitionSet:u},{addQueryPrefix:!0}):"";return"/".concat(d?"jobs":"pipelines","/").concat(l,"/partitions").concat(e)},[u,d,l]),h=(0,P.$U)(n,p),x=(0,c._)((0,Z.t)(tn,{variables:{scheduleSelector:{scheduleName:o,repositoryName:n.name,repositoryLocationName:n.location}}}),2),f=x[0],j=x[1],g=j.data,v=j.loading,y=(0,a.useCallback)(function(){return f()},[f]);return(0,r.jsxs)(n5.Z,{direction:"column",spacing:4,children:[(0,r.jsx)(T.rU,{to:h,children:u}),function(){if(v)return(0,r.jsx)(m.YS,{style:{color:N.$()},children:"Loading…"});if(!g)return(0,r.jsx)(nr.Z,{onClick:y,children:(0,r.jsx)(m.YS,{children:"Show coverage"})});var e=g.scheduleOrError;return"Schedule"===e.__typename?(0,r.jsx)(RetrievedSchedulePartitionStatus,{schedule:e,partitionURL:h}):(0,r.jsx)(m.YS,{style:{color:N.Yn()},children:"Partition set not found!"})}()]})}),RetrievedSchedulePartitionStatus=function(e){var n=e.schedule,t=e.partitionURL,i=n.partitionSet;if(!i||"PartitionStatuses"!==i.partitionStatusesOrError.__typename)return(0,r.jsx)("span",{style:{color:N.$()},children:"None"});var o=i.partitionStatusesOrError.results,s={};return o.forEach(function(e){var n=calculateDisplayStatus(e);s[n]=(0,k._)(s[n]||[]).concat([e])}),(0,r.jsx)(n7.Jy,{children:(0,r.jsx)("tbody",{children:n9.map(function(e){return e in s?(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{style:{width:"100px"},children:e}),(0,r.jsx)("td",{children:"Failed"===e||"Missing"===e?(0,r.jsx)(T.rU,{to:"".concat(t,"?showFailuresAndGapsOnly=true"),style:{color:N.Ep()},children:s[e].length}):s[e].length})]},e):null})})})},tn=(0,p.Ps)(SchedulePartitionStatus_templateObject()),tt=t(55055),ScheduleResetButton=function(e){var n=e.repoAddress,t=e.schedule,i=(0,ne.xz)(n.location).permissions,o=i.canStartSchedule,s=i.canStopRunningSchedule,a=t.name,l=(0,ea._)((0,es._)({},(0,G.$)(n)),{scheduleName:a}),u=(0,c._)((0,nN.D)(tt.E1,{onCompleted:tt.JH}),2),d=u[0],p=u[1].loading,h=o&&s,m=h?'In code, a default status for "'.concat(a,'" has been set to "').concat(t.defaultStatus,'". Click here to reset the schedule status to track the status set in code.'):ne.Qr;return(0,r.jsx)(ek.u,{content:m,display:"flex",children:(0,r.jsx)(no.zx,{disabled:p||!h,onClick:function(){d({variables:{scheduleSelector:l}})},children:"Reset schedule status"})})},tr=t(54483),ti=t(90818),to=t(37783),ts=t(44678),ta=t(4472),tl=t(39818),tc=t(59686),tu=t(37305);function EvaluateScheduleDialog_templateObject(){var e=(0,u._)(["\n  query getSchedule(\n    $scheduleSelector: ScheduleSelector!\n    $startTimestamp: Float\n    $ticksAfter: Int\n    $ticksBefore: Int\n  ) {\n    scheduleOrError(scheduleSelector: $scheduleSelector) {\n      ... on PythonError {\n        message\n        stack\n      }\n      ... on Schedule {\n        id\n        name\n        potentialTickTimestamps(\n          startTimestamp: $startTimestamp\n          upperLimit: $ticksAfter\n          lowerLimit: $ticksBefore\n        )\n      }\n    }\n  }\n"]);return EvaluateScheduleDialog_templateObject=function(){return e},e}function EvaluateScheduleDialog_templateObject1(){var e=(0,u._)(["\n  mutation ScheduleDryRunMutation($selectorData: ScheduleSelector!, $timestamp: Float) {\n    scheduleDryRun(selectorData: $selectorData, timestamp: $timestamp) {\n      ...PythonErrorFragment\n      ... on DryRunInstigationTick {\n        timestamp\n        evaluationResult {\n          runRequests {\n            ...RunRequestFragment\n          }\n          skipReason\n          error {\n            ...PythonErrorFragment\n          }\n        }\n      }\n      ... on ScheduleNotFoundError {\n        scheduleName\n      }\n    }\n  }\n  ","\n  ","\n"]);return EvaluateScheduleDialog_templateObject1=function(){return e},e}function EvaluateScheduleDialog_templateObject2(){var e=(0,u._)(["\n  button {\n    width: 100%;\n    display: flex;\n    justify-content: space-between;\n  }\n"]);return EvaluateScheduleDialog_templateObject2=function(){return e},e}function EvaluateScheduleDialog_templateObject3(){var e=(0,u._)(["\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  padding-bottom: 12px;\n  border-bottom: 1px solid ",";\n  margin-bottom: 12px;\n  "," {\n    padding-bottom: 4px;\n    display: block;\n  }\n  pre {\n    margin: 0;\n  }\n  button {\n    margin-top: 4px;\n  }\n"]);return EvaluateScheduleDialog_templateObject3=function(){return e},e}function EvaluateScheduleDialog_templateObject4(){var e=(0,u._)(["\n  padding-bottom: 2px;\n"]);return EvaluateScheduleDialog_templateObject4=function(){return e},e}var td=navigator.language,EvaluateScheduleDialog=function(e){return(0,r.jsx)(ni.Vq,(0,ea._)((0,es._)({},e),{style:{width:"70vw",display:"flex"},title:(0,r.jsxs)(i.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,r.jsx)(E.JO,{name:"schedule"}),(0,r.jsx)("span",{children:e.name})]}),children:(0,r.jsx)(EvaluateSchedule,(0,es._)({},e))}))},EvaluateSchedule=function(e){var n=e.repoAddress,t=e.name,o=e.onClose,s=e.jobName,l=(0,c._)((0,a.useState)(),2),u=l[0],p=l[1],h=(0,d.a)(tp,{variables:{scheduleSelector:{repositoryLocationName:n.location,repositoryName:n.name,scheduleName:t}}}).data,m=(0,a.useContext)(tc.JB),x=(0,c._)(m.timezone,1)[0],f=(0,c._)((0,a.useState)(!1),2),j=f[0],g=f[1],v=(0,a.useRef)(null),y=(0,nb.S)(),S=y.viewport,b=y.containerProps,_=(0,c._)((0,a.useState)(!1),2),O=_[0],P=_[1],R=(0,a.useMemo)(function(){if(O)return(0,r.jsx)(EvaluateScheduleContent,{repoAddress:n,name:t,timestamp:v.current.ts,jobName:s});if(!h)return(0,r.jsx)(i.x,{padding:{vertical:48},flex:{alignItems:"center",justifyContent:"center"},children:(0,r.jsx)(A.$,{purpose:"page"})});if("PythonError"===h.scheduleOrError.__typename||"ScheduleNotFoundError"===h.scheduleOrError.__typename)return(0,r.jsx)("div",{});var e,o=h.scheduleOrError.potentialTickTimestamps.map(function(e){return{ts:e,label:(0,tu.j)({timestamp:{unix:e},locale:td,timezone:x,timeFormat:{showTimezone:!0}})}});return v.current=u||o[0]||null,(0,r.jsxs)(tm,{children:[(0,r.jsx)(tf,{children:"Select a mock evaluation time"}),(0,r.jsx)(to.J,{isOpen:j,position:"bottom-left",fill:!0,content:(0,r.jsx)(ts.v2,{style:{maxHeight:"400px",overflow:"scroll",width:"".concat(S.width,"px")},children:o.map(function(e){return(0,r.jsx)(ts.sN,{text:(0,r.jsx)("div",{"data-testid":(0,nF.N)("tick-".concat(e.ts)),children:e.label}),onClick:function(){p(e),g(!1)}},e.ts)})}),children:(0,r.jsx)("div",(0,ea._)((0,es._)({},b),{children:(0,r.jsx)(no.zx,{style:{flex:1},rightIcon:(0,r.jsx)(E.JO,{name:"arrow_drop_down"}),onClick:function(){return g(function(e){return!e})},"data-testid":(0,nF.N)("tick-selection"),children:null===(e=v.current)||void 0===e?void 0:e.label})}))})]})},[u,b,h,j,s,t,n,O,x,S.width]),N=(0,a.useMemo)(function(){return O?(0,r.jsx)(no.zx,{onClick:o,children:"Close"}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(no.zx,{onClick:o,children:"Cancel"}),(0,r.jsx)(no.zx,{"data-testid":(0,nF.N)("evaluate"),intent:"primary",onClick:function(){P(!0)},children:"Evaluate"})]})},[o,O]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ni.a7,{children:(0,r.jsx)("div",{style:{minHeight:"300px"},children:R})}),N?(0,r.jsx)(ni.cN,{topBorder:!0,children:N}):null]})},tp=(0,p.Ps)(EvaluateScheduleDialog_templateObject()),EvaluateScheduleContent=function(e){var n,t,s,l,u=e.repoAddress,d=e.name,p=e.timestamp,h=e.jobName,f=(0,a.useContext)(tc.JB),j=(0,c._)(f.timezone,1)[0],g=(0,c._)((0,nN.D)(th,(0,a.useMemo)(function(){var e=(0,G.$)(u);return{variables:{selectorData:(0,ea._)((0,es._)({},e),{scheduleName:d}),timestamp:p}}},[d,u,p])),1)[0],v=(0,c._)((0,a.useState)(null),2),y=v[0],S=v[1];if((0,a.useEffect)(function(){g().then(function(e){S(function(){return e})})},[g]),!y||!y.data)return(0,r.jsx)(i.x,{padding:32,flex:{justifyContent:"center",alignItems:"center"},children:(0,r.jsx)(A.$,{purpose:"page"})});var b=(null==y?void 0:null===(t=y.data)||void 0===t?void 0:t.scheduleDryRun.__typename)==="DryRunInstigationTick"?null==y?void 0:null===(s=y.data)||void 0===s?void 0:s.scheduleDryRun.evaluationResult:null,_=null==b?void 0:null===(l=b.runRequests)||void 0===l?void 0:l.length,O=null==b?void 0:b.error;return(0,r.jsxs)(i.x,{flex:{direction:"column",gap:8},children:[(0,r.jsx)(i.x,{children:(0,r.jsxs)(tx,{children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(m.pm,{children:"Result"}),(0,r.jsx)(i.x,{flex:{grow:1,alignItems:"center"},children:(0,r.jsx)("div",{children:O?(0,r.jsx)(x.V,{intent:"danger",children:"Failed"}):_?(0,r.jsxs)(x.V,{intent:"success",children:[_," run requests"]}):(0,r.jsx)(x.V,{intent:"warning",children:"Skipped"})})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(m.pm,{children:"Tick"}),(0,r.jsx)(i.x,{flex:{grow:1,alignItems:"center"},children:(0,r.jsx)(m.fv,{children:(0,tu.j)({timestamp:{unix:p},locale:td,timezone:j,timeFormat:{showTimezone:!0}})})})]})]})}),y.data&&b?b.error?(0,r.jsx)(nZ.T9,{error:b.error}):(null===(n=b.runRequests)||void 0===n?void 0:n.length)?(0,r.jsx)(ta.k,{runRequests:b.runRequests,repoAddress:u,isJob:!0,jobName:h,name:d}):(0,r.jsxs)("div",{children:[(0,r.jsx)(m.pm,{children:"Skip Reason"}),(0,r.jsx)("div",{children:(null==b?void 0:b.skipReason)||"No skip reason was output"})]}):(0,r.jsx)(o.t,{title:"An unknown error occurred",description:(0,r.jsxs)("span",{children:["File an issue on"," ",(0,r.jsx)("a",{href:"https://github.com/dagster-io/dagster",target:"_blank",rel:"noreferrer",children:"Github"})," ","if you think this is a bug"]}),icon:"error"})]})},th=(0,p.Ps)(EvaluateScheduleDialog_templateObject1(),f.B,tl.s),tm=F.ZP.div.withConfig({componentId:"sc-6b775bda-0"})(EvaluateScheduleDialog_templateObject2()),tx=F.ZP.div.withConfig({componentId:"sc-6b775bda-1"})(EvaluateScheduleDialog_templateObject3(),N.wL(),m.pm),tf=F.ZP.div.withConfig({componentId:"sc-6b775bda-2"})(EvaluateScheduleDialog_templateObject4()),tj=t(581),tg={showSeconds:!0,showTimezone:!0},ScheduleDetails=function(e){var n=e.repoAddress,t=e.schedule,o=e.refreshState,s=t.cronSchedule,l=t.executionTimezone,u=t.futureTicks,d=t.name,p=t.partitionSet,f=t.pipelineName,j=t.scheduleState,g=j.status,y=j.ticks,S=y.length>0?y[0]:null,b=g===nc.ynu.RUNNING,_=(0,K.Ux)(n),O=(0,K.E8)(_,f),P=(0,c._)((0,a.useState)(!1),2),R=P[0],A=P[1];return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(h.m,{title:(0,r.jsx)(m.X6,{children:d}),tags:(0,r.jsxs)(x.V,{icon:"schedule",children:["Schedule in ",(0,r.jsx)(v.b,{repoAddress:n})]}),right:(0,r.jsxs)(i.x,{flex:{direction:"row",alignItems:"center",gap:8},children:[(0,r.jsx)(B.xi,{refreshState:o}),(0,r.jsx)(no.zx,{onClick:function(){A(!0)},children:"Test Schedule"})]})}),(0,r.jsx)(EvaluateScheduleDialog,{isOpen:R,onClose:function(){A(!1)},name:t.name,repoAddress:n,jobName:f},R?"1":"0"),(0,r.jsx)(nl.fJ,{children:(0,r.jsxs)("tbody",{children:[t.description?(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Description"}),(0,r.jsx)("td",{children:t.description})]}):null,(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Latest tick"}),(0,r.jsx)("td",{children:S?(0,r.jsxs)(n5.Z,{direction:"row",spacing:8,alignItems:"center",children:[(0,r.jsx)(nm.v,{timestamp:S.timestamp,timezone:l,timeFormat:tg}),(0,r.jsx)(tj.a,{tick:S})]}):"Schedule has never run"})]}),u.results[0]&&b&&(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Next tick"}),(0,r.jsx)("td",{children:(0,r.jsx)(nm.v,{timestamp:u.results[0].timestamp,timezone:l,timeFormat:tg})})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:O?"Job":"Pipeline"}),(0,r.jsx)("td",{children:(0,r.jsx)(ti.h,{pipelineName:f,pipelineHrefContext:n,isJob:O})})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,r.jsx)(i.x,{flex:{alignItems:"center"},style:{height:"32px"},children:"Running"})}),(0,r.jsx)("td",{children:(0,r.jsxs)(i.x,{flex:{direction:"row",gap:12,alignItems:"center"},style:{height:"32px"},children:[(0,r.jsx)(ng.M,{repoAddress:n,schedule:t}),t.canReset&&(0,r.jsx)(ScheduleResetButton,{repoAddress:n,schedule:t})]})})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Partition set"}),(0,r.jsx)("td",{children:p?(0,r.jsx)(te,{schedule:t,repoAddress:n}):"None"})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Schedule"}),(0,r.jsx)("td",{children:s?(0,r.jsxs)(n5.Z,{direction:"row",spacing:8,children:[(0,r.jsx)("span",{children:(0,tr.A)(s,l||"UTC")}),(0,r.jsxs)(m.EK,{children:["(",s,")"]})]}):(0,r.jsx)("div",{children:"—"})})]}),l?(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Execution timezone"}),(0,r.jsx)("td",{children:l})]}):null]})})]})};function ScheduleUtils_templateObject(){var e=(0,u._)(["\n  fragment ScheduleFragment on Schedule {\n    id\n    name\n    cronSchedule\n    executionTimezone\n    pipelineName\n    solidSelection\n    mode\n    description\n    partitionSet {\n      id\n      name\n    }\n    defaultStatus\n    canReset\n    scheduleState {\n      id\n      ...InstigationStateFragment\n    }\n    futureTicks(limit: 5) {\n      results {\n        timestamp\n      }\n    }\n  }\n\n  ","\n"]);return ScheduleUtils_templateObject=function(){return e},e}var tv=(0,p.Ps)(ScheduleUtils_templateObject(),n7.ai),ty=t(84826),tS=t(31761),tb=t(50623),t_=t(61608);function ScheduleRoot_templateObject(){var e=(0,u._)(['\n  query ScheduleRootQuery($scheduleSelector: ScheduleSelector!) {\n    scheduleOrError(scheduleSelector: $scheduleSelector) {\n      ... on Schedule {\n        id\n        ...ScheduleFragment\n      }\n      ... on ScheduleNotFoundError {\n        message\n      }\n      ...PythonErrorFragment\n    }\n    instance {\n      id\n      daemonHealth {\n        id\n        daemonStatus(daemonType: "SCHEDULER") {\n          id\n          healthy\n        }\n      }\n      ...InstanceHealthFragment\n    }\n  }\n\n  ',"\n  ","\n  ","\n"]);return ScheduleRoot_templateObject=function(){return e},e}function ScheduleRoot_templateObject1(){var e=(0,u._)(["\n  query PreviousRunsForScheduleQuery($filter: RunsFilter, $limit: Int) {\n    pipelineRunsOrError(filter: $filter, limit: $limit) {\n      ... on Runs {\n        results {\n          id\n          ... on PipelineRun {\n            ...RunTableRunFragment\n          }\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n\n  ","\n"]);return ScheduleRoot_templateObject1=function(){return e},e}var ScheduleRoot=function(e){(0,j.Px)();var n=e.repoAddress,t=(0,l.UO)().scheduleName;(0,g.j)("Schedule: ".concat(t));var i=(0,ea._)((0,es._)({},(0,G.$)(n)),{scheduleName:t}),o=(0,c._)(a.useState("ticks"),2),s=o[0],u=o[1],p=(0,d.a)(tO,{variables:{scheduleSelector:i},notifyOnNetworkStatusChange:!0});(0,y.Hu)(p,"ScheduleRootQuery");var h=(0,B.C4)(p,B.dT),m=(0,r.jsxs)(eH.mQ,{selectedTabId:s,onChange:u,children:[(0,r.jsx)(eH.OK,{id:"ticks",title:"Tick history"}),(0,r.jsx)(eH.OK,{id:"runs",title:"Run history"})]});return(0,r.jsx)(O.g,{queryResult:p,allowStaleData:!0,children:function(e){var t=e.scheduleOrError,i=e.instance;if("Schedule"!==t.__typename)return null;var o=!i.daemonHealth.daemonStatus.healthy;return(0,r.jsxs)(eB.T,{children:[(0,r.jsx)(ScheduleDetails,{repoAddress:n,schedule:t,refreshState:h}),o?(0,r.jsx)(ty.K,{daemonHealth:i.daemonHealth,padding:{vertical:16,horizontal:24}}):null,"ticks"===s?(0,r.jsx)(tb.H,{tabs:m,repoAddress:n,name:t.name}):(0,r.jsx)(SchedulePreviousRuns,{repoAddress:n,schedule:t,tabs:m})]})}})},SchedulePreviousRuns=function(e){var n=e.repoAddress,t=e.schedule,i=e.highlightedIds,s=e.tabs,a=(0,d.a)(tP,{variables:{limit:20,filter:{tags:[{key:nd.H.ScheduleName,value:t.name},{key:nd.H.RepositoryLabelTag,value:(0,$.Wg)(n)}]}},notifyOnNetworkStatusChange:!0});(0,B.C4)(a,B.dT);var l=a.data;if(!l)return null;if("Runs"!==l.pipelineRunsOrError.__typename)return(0,r.jsx)(o.t,{icon:"error",title:"Query Error",description:l.pipelineRunsOrError.message});var c=null==l?void 0:l.pipelineRunsOrError.results;return(0,r.jsx)(t_.AL,{actionBarComponents:s,runs:c,highlightedIds:i,hideCreatedBy:!0})},tO=(0,p.Ps)(ScheduleRoot_templateObject(),tv,f.B,tS.O),tP=(0,p.Ps)(ScheduleRoot_templateObject1(),t_.ZZ),tR=t(20762),RepoRouteContainer=function(){var e=(0,l.UO)().repoPath,n=(0,a.useContext)(K.C5),t=(0,eG.g)(e),s=n.loading;return t?n.allRepos.find(function(e){return e.repository.name===t.name&&e.repositoryLocation.name===t.location})||s?(0,r.jsxs)(l.rs,{children:[(0,r.jsx)(l.AW,{path:"/locations/:repoPath/resources",exact:!0,children:(0,r.jsx)(n3.g,{repoAddress:t})}),(0,r.jsx)(l.AW,{path:"/locations/:repoPath/assets",exact:!0,children:(0,r.jsx)(WorkspaceAssetsRoot,{repoAddress:t})}),(0,r.jsx)(l.AW,{path:"/locations/:repoPath/jobs",exact:!0,children:(0,r.jsx)(WorkspaceJobsRoot,{repoAddress:t})}),(0,r.jsx)(l.AW,{path:"/locations/:repoPath/schedules",exact:!0,children:(0,r.jsx)(WorkspaceSchedulesRoot,{repoAddress:t})}),(0,r.jsx)(l.AW,{path:"/locations/:repoPath/sensors",exact:!0,children:(0,r.jsx)(WorkspaceSensorsRoot,{repoAddress:t})}),(0,r.jsx)(l.AW,{path:"/locations/:repoPath/graphs",exact:!0,children:(0,r.jsx)(WorkspaceGraphsRoot,{repoAddress:t})}),(0,r.jsx)(l.AW,{path:"/locations/:repoPath/ops/:name?",exact:!0,children:(0,r.jsx)(WorkspaceOpsRoot,{repoAddress:t})}),(0,r.jsx)(l.AW,{path:"/locations/:repoPath/graphs/(/?.*)",children:(0,r.jsx)(GraphRoot,{repoAddress:t})}),(0,r.jsx)(l.AW,{path:["/locations/:repoPath/pipelines/(/?.*)","/locations/:repoPath/jobs/(/?.*)","/locations/:repoPath/pipeline_or_job/(/?.*)"],children:(0,r.jsx)(PipelineRoot,{repoAddress:t})}),(0,r.jsx)(l.AW,{path:"/locations/:repoPath/schedules/:scheduleName/:runTab?",children:(0,r.jsx)(ScheduleRoot,{repoAddress:t})}),(0,r.jsx)(l.AW,{path:"/locations/:repoPath/sensors/:sensorName",children:(0,r.jsx)(tR.A,{repoAddress:t})}),(0,r.jsx)(l.AW,{path:"/locations/:repoPath/resources/:resourceName",children:(0,r.jsx)(n6.r,{repoAddress:t})}),(0,r.jsx)(l.AW,{path:["/locations/:repoPath/asset-groups/:groupName/list(/?.*)"],children:(0,r.jsx)(AssetGroupRoot,{repoAddress:t,tab:"list"})}),(0,r.jsx)(l.AW,{path:["/locations/:repoPath/asset-groups/:groupName/(/?.*)","/locations/:repoPath/asset-groups/:groupName"],children:(0,r.jsx)(AssetGroupRoot,{repoAddress:t,tab:"lineage"})}),(0,r.jsx)(l.AW,{path:"/locations/:repoPath/*",children:(0,r.jsx)(l.l_,{to:(0,P.$U)(t,"/assets")})})]}):(0,r.jsx)(i.x,{padding:{vertical:64},children:(0,r.jsx)(o.t,{icon:"error",title:"Unknown code location",description:(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{children:(0,r.jsx)("strong",{children:(0,$.Uz)(t)})}),"  is not loaded in the current workspace."]})})}):(0,r.jsx)(i.x,{padding:{vertical:64},children:(0,r.jsx)(o.t,{icon:"error",title:"Invalid code location path",description:(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{children:(0,r.jsx)("strong",{children:e})}),"  is not a valid code location path."]})})})},WorkspaceRoot=function(){return(0,r.jsx)(s.M,{children:(0,r.jsx)(l.rs,{children:(0,r.jsx)(l.AW,{path:"/locations/:repoPath",children:(0,r.jsx)(RepoRouteContainer,{})})})})},tA=WorkspaceRoot}}]);
//# sourceMappingURL=2195.ce9ba1336ba026fa.js.map